<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Managing Rails Versions and Gems &#183; RailsApps</title>
  <meta name="viewport" content="width=device-width">
  <link href="https://plus.google.com/117374718581973393536" rel="publisher">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/normalize.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/foundation.min.css">
  <link rel="stylesheet" href="http://railsapps.github.io/css/railsapps.css" />
  <link rel="stylesheet" href="http://railsapps.github.io/css/syntax.css" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <script type="text/javascript">
  window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load("l1stqfqqbf");
    window.analytics.page();
    window.analytics.ready(function () {
      ga('require', 'linker');
      ga('linker:autoLink', ['railscomposer.com','learn-rails.com','blog.railsapps.org','tutorials.railsapps.org']);
    });
    </script>
</head>
<body>
  <div class="fixed">
    <nav class="top-bar" data-topbar>
      <ul class="title-area">
        <li class="name">
          <a href="http://railsapps.github.io/" class="brand">RailsApps Project</a>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>
      <section class="top-bar-section">
        <ul class="right">
          <li><a href="https://tutorials.railsapps.org/" class="google">Tutorials</a></li>
          <li><a href="http://twitter.com/rails_apps" class="twitter">Twitter</a></li>
          <li><a href="http://blog.railsapps.org/" class="twitter">Blog</a></li>
          <li><a href="https://github.com/RailsApps" class="github">GitHub Repository</a></li>
        </ul>
      </section>
    </nav>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <div class="content wikistyle gollum textile">
        h1. Managing Rails Versions and Gems

h4. by Daniel Kehoe

_Last updated 29 December 2014_

Learn tips and tricks for managing Rails and Ruby gems. Relieve your headaches when versions collide.

This is a guide for developers using the example apps from the "Rails Apps":http://railsapps.github.io/ repository. Others may find it helpful as well.

Before you install one of the "Rails example apps":https://github.com/RailsApps, there are a few things you should know about managing the pieces of the Rails platform. Often, everything "just works," but when it doesn't, here's what you need to review. Read on if you'd like to know how all the moving parts work together.

If you're new to Rails, see "What is Ruby on Rails?":http://railsapps.github.io/what-is-ruby-rails.html, the book "Learn Ruby on Rails":http://learn-rails.com/learn-ruby-on-rails.html, and recommendations for a "Rails tutorial":https://tutorials.railsapps.org/rails-tutorial.

h2. Install Rails

See "Installing Rails":http://railsapps.github.io/installing-rails.html for detailed instructions and advice.

h2. Background

The Ruby on Rails platform is a living ecosystem: a community of developers, their projects, and complex dependencies among their projects. At times (often before and after the release of a major new version of Rails) the ecosystem enters a state of disequilibrium and important pieces no longer work together easily. These times of disequilibrium are valuable for the ecosystem because, as a whole, developers innovate and Rails improves during these times.

For you as a developer, it may feel like a trainwreck. You productivity will stall as you try to sort out what is broken and how to fix it. But you'll find help here.

h4. Example Apps

The example apps from the "Rails Apps":http://railsapps.github.io/ repository help you keep current with changing Rails and gem versions.

Each example provides a set of useful, popular Rails gems integrated into a working application. Each example is known to work and can serve as your personal "reference implementation". Each is an open source project. Many developers use the apps, report problems as they arise, and propose solutions as GitHub issues.

These examples provide a working *Rails app* with a *detailed tutorial* that can be used to create a *starter app*. Each of these example apps can be created using the "Rails Composer":http://railsapps.github.io/rails-composer/ tool ("like the 'rails new' command on steroids"):

|_. Example Applications for Rails 4.2 |_. Tutorial |_. Comments |
| "Learn Rails":https://github.com/RailsApps/learn-rails | "Learn Ruby on Rails":http://learn-rails.com/learn-ruby-on-rails.html | introduction to Rails for beginners |
| "Rails and Bootstrap":https://github.com/RailsApps/rails-bootstrap | "Rails Bootstrap Tutorial":http://railsapps.github.io/rails-bootstrap  | starter app for Rails and Bootstrap |
| "Rails and Foundation":https://github.com/RailsApps/rails-foundation | "Rails Foundation Tutorial":http://railsapps.github.io/rails-foundation | starter app for Rails and Zurb Foundation |
| "Mailing List with Active Job":https://github.com/RailsApps/rails-mailinglist-activejob | "Mailing List with Active Job Tutorial":http://railsapps.github.io/rails-mailinglist-activejob | background processing |
| "OmniAuth and Rails":https://github.com/RailsApps/rails-omniauth | "OmniAuth Tutorial":http://railsapps.github.io/rails-omniauth/ | OmniAuth for authentication |
| "Devise and Rails":https://github.com/RailsApps/rails-devise | "Devise Tutorial":http://railsapps.github.io/rails-devise | Devise for authentication |
| "Role-Based Authorization":https://github.com/RailsApps/rails-devise-role | "Role-Based Authorization Tutorial":http://railsapps.github.io/rails-devise-roles | Simple authorization |
| "Pundit and Rails":https://github.com/RailsApps/rails-devise-pundit | "Rails Pundit Tutorial":http://railsapps.github.io/rails-devise-pundit | Pundit for authorization |
| "Sign Up and Download":https://github.com/RailsApps/rails-signup-download | "Sign Up and Download Tutorial":http://railsapps.github.io/rails-signup-download | Devise with authorization to download a PDF file |
| "Stripe Checkout":https://github.com/RailsApps/rails-stripe-checkout | "Stripe Checkout Tutorial":http://railsapps.github.io/rails-stripe-checkout | selling a product with Stripe Checkout |

h2. Ruby

Ruby is the programming language used for Rails projects.

What version of Ruby is installed on your machine? Check with:

@$ ruby -v@

For the example apps it should be version 2.2.0.

You can check for the current "recommended version of Ruby":http://www.ruby-lang.org/en/downloads/.

See instructions for "Installing Rails":http://railsapps.github.io/installing-rails.html to install a newer version of Ruby if necessary.

h2. RubyGems

RubyGems is a package management framework for Ruby. A gem is a packaged Ruby application or library. You can "read more about gems":http://docs.rubygems.org/shelf/index if you wish. Gems come from a wonderful pool of open source love but can be a headache to track and integrate.

The RubyGems package management system comes as part of a standard Ruby language installation.

What version of the RubyGems system is installed on your machine? Check with:

@$ gem -v@

For the example apps it should be version 1.8.17 or newer.

The RubyGems package management system is part of a standard Ruby language installation. It can be updated by installing the rubygems-update gem.

You can check for the current "rubygems-update gem":https://rubygems.org/gems/rubygems-update.

Use @gem update --system@ to upgrade the RubyGems system.

As of release 1.8.0 (4 May 2011), the RubyGems system gem began a series of rapid updates (with "controversy":http://blog.majesticseacreature.com/mending-the-rubygems-fences and a promised "resolution":http://blog.majesticseacreature.com/establishing-release-management-policies-for). The example apps all work with version 1.8.15 but if you install a gem and find it doesn't work, roll back to an older version of RubyGems:

@gem update --system 1.7.2@

or even:

@gem update --system 1.3.7@

h2. Rails

Rails itself is a gem, which means it can be installed and updated like any other gem.

What version of Rails is installed on your machine? Check with:

@$ rails -v@

You can check for the newest released "Rails version":https://rubygems.org/gems/rails.

For the example apps it should be version 3.2.

See instructions for "Installing Rails 3.2":http://railsapps.github.io/installing-rails.html to install or update Rails. I recommend that you create a new gemset using "rvm":http://rvm.beginrescueend.com/ before installing a new version of Rails (rather than using @gem update rails@). With rvm, you can switch gemsets to run your application under an earlier version of Rails.

h2. Rake

"Rake":http://lukaszwrobel.pl/blog/rake-tutorial is a software task management or "build" tool used extensively by Rails and many gems.

What version of rake is installed on your machine? Check with:

@$ rake --version@

You can check for the newest released "rake gem":https://rubygems.org/gems/rake.

For apps built with Rails 3.2, use rake 0.9.2.2 or newer.

If you are using an older version of Rake, you should update Rake to 0.9.2 or newer immediately after creating a new gemset and before installing Rails 3.2.

Here's how to update Rake:

<pre>
$ gem update rake
$ rake --version
</pre>

If you see this error message when installing one of the "Rails Apps examples":http://railsapps.github.io/, you should create a new gemset, update Rake, and create a fresh install of Rails 3.2:

<pre>
The template ... could not be loaded.
Error: You have already activated rake 0.8.7, but your Gemfile requires rake 0.9.x.
Consider using bundle exec.
</pre>

See an explanation by David Chelimsky in his blog post "Rake 0.9 and Gem Version Constraints":http://blog.davidchelimsky.net/2011/05/28/rake-09-and-gem-version-constraints/ about collisions among versions of Rake and gems.

h2. Bundler and the Gemfile

The "Ruby Bundler":http://gembundler.com/ manages an application's gems. Bundler works by reading a *Gemfile* in an application's root directory, downloading and unpacking specified versions of each required gem, resolving any dependencies among gems, and creating a *Gemfile.lock* file to force use of the specified gem versions.

Each of the example apps is provided with a gemfile that specifies a known working set of required gems.

After creating an example app, run @bundle install@ to install all the necessary gems.

If you add a new gem to the gemfile, run @bundle install@ again.

If you want to force an upgrade to all the gems that have newer versions, run @bundle update@. When you update a gem, bundler will not update a dependency of that gem if another gem still depends on it.

h4. Gem Version Constraint

You will specify the gems you need in your application's Gemfile. If you don't specify a version, your application will use the newest gem version installed on your machine.

If you run @bundle update@, each gem will be updated to the newest available. You may benefit from the features (or the bug fixes) of the newest version. Or you may discover integration issues with other gems which cause failures. To avoid surprises and manage gem updates cautiously, you can specify gem versions in your Gemfile ("described in the RubyGems manual":http://docs.rubygems.org/read/chapter/16).

h4. Optimistic Version Constraint

In the gemfiles for the example apps, you'll often see "optimistic version constraint" specified with the @&gt;=@ operator like this:

@gem 'devise', '&gt;= 1.3.4'@

This means, "use any version of the Devise gem that is newer than version 1.3.4." It will force an upgrade of the Devise gem to version 1.3.4 the first time you run @bundle update@ and check and install newer versions each subsequent time you run @bundle update@. That's a good scheme for keeping your gems up-to-date unless there is a known issue with a gem.

h4. Pessimistic Version Constraint

In the some gemfiles you may see "pessimistic version constraint" like this:

@gem 'library', '~&gt; 2.2'@

which is shorthand for

@gem 'library', '&gt;= 2.2.0', '@ operator is variously known as the "twiddle wakka," "tildemator," or "spermy operator.")

h4. Absolute Version Constraint

In the example apps, we use "absolute version constraint" to specify a known working version of a gem if we've seen reported problems with newer versions. Absolute version constraint looks like this:

@gem 'library', '2.2'@

h2. Using rvm to Manage Multiple Versions of Rails

I recommend installing rvm, the "Ruby Version Manager":http://rvm.beginrescueend.com/. It's essential if you must use multiple versions of Rails. And rvm makes it easy to switch sets of gems if you suspect a problem with incompatibilities among gems.

h4. Install RVM

The rvm website explains "how to install rvm":https://rvm.beginrescueend.com/rvm/install/.

h4. Create a Gemset for a Project

See instructions for "Installing Rails 3.2":http://railsapps.github.io/installing-rails.html to install Rails and create a new gemset using rvm.

h4. Setting a Project-Specific Gemset

RVM recognizes *.ruby-version* and *.ruby-gemset* files in a directory and loads a specified gemset.

Here's how to create *.ruby-version* and *.ruby-gemset* files if you're using a gemset named "ruby-2.2.0@myapp":

<pre>
$ echo "ruby-2.2.0" &gt; .ruby-version
$ echo "myapp" &gt; .ruby-gemset
</pre>

Using *.ruby-version* and *.ruby-gemset* files means you'll automatically be using the correct Rails and gem version when you run your application on your local machine. This works best if you create an rvm gemset specifically for your application.

h2. Using Pik to Manage Multiple Versions of Rails on Windows

For Windows users juggling different versions of Ruby, "pik":https://github.com/vertiginous/pik is a tool similar to RVM. The pik set of commands for managing multiple rubies is similar to that of RVM.

h4. Install Pik

The readme section on the "repository home page":https://github.com/vertiginous/pik gives the requirements for running pik, the most notable of which is that it requires Mat's Ruby Interpreter version 1.8.7-p330. Make sure to install this version as your "default" Ruby version, which can be done most easily using "RubyInstaller":http://rubyinstaller.org/downloads/archives. In addition to Mat's Ruby Interpreter, RubyInstaller also includes "DevKit":https://github.com/oneclick/rubyinstaller/wiki/Development-Kit and other useful tools for Ruby programmers using Windows.

Pik can be installed with Windows Installer or by simply typing: <pre>C:\gem install pik</pre> once RubyInstaller 1.8.7-p330 has been installed and configured.


      </div>
      <div class="comments" id="comments">
        <div class="content wikistyle gollum">
          <h2>Comments</h2>
        </div>
        <p>Is this helpful? Your encouragement fuels the project. Please tweet or add a comment. Couldn't get something to work? For the example apps and tutorials, it's best to open an issue on GitHub so we can help you.</p>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'railsapps'; // required: replace example with your forum shortname
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div><!-- class="comments" -->
    </div><!-- class="columns" -->
  </div><!-- class="row" -->
  <footer class="row">
    <div class="large-12 columns">
      <div class="row">
         <div class="medium-4 large-4 columns">
           <dl class="footer_nav">
             <dt>RailsApps &#183; Getting Started</dt>
             <dd><a href="http://railsapps.github.io/ruby-and-rails.html">Ruby on Rails</a></dd>
             <dd><a href="http://railsapps.github.io/what-is-ruby-rails.html">What is Ruby on Rails?</a></dd>
             <dd><a href="http://learn-rails.com/learn-ruby-on-rails.html">Learn Ruby on Rails</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-tutorial">Rails Tutorial</a></dd>
             <dd><a href="http://learn-rails.com/ruby-on-rails-tutorial-for-beginners">Ruby on Rails Tutorial for Beginners</a></dd>
             <dd><a href="http://railsapps.github.io/installing-rails.html">Install Ruby on Rails</a></dd>
             <dd><a href="http://railsapps.github.io/installrubyonrails-mac.html">Install Ruby on Rails - Mac OS X</a></dd>
             <dd><a href="http://railsapps.github.io/installrubyonrails-ubuntu.html">Install Ruby on Rails - Ubuntu</a></dd>
             <dd><a href="http://railsapps.github.io/rubyonrails-nitrous-io.html">Ruby on Rails - Nitrous.io</a></dd>
             <dd><a href="http://railsapps.github.io/updating-rails.html">Update Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-composer/">Rails Composer</a></dd>
             <dd><a href="http://railsapps.github.io/">Rails Examples</a></dd>
             <dd><a href="http://railsapps.github.io/rails-examples-tutorials.html">Rails Starter Apps</a></dd>
           </dl>
         </div>
         <div class="medium-4 large-4 columns">
           <dl class="footer_nav">
             <dt>RailsApps &#183; Articles</dt>
             <dd><a href="http://railsapps.github.io/rails-authorization.html">Rails Authorization</a></dd>
             <dd><a href="http://railsapps.github.io/rails-google-analytics.html">Analytics for Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-heroku-tutorial.html">Heroku and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-javascript-include-external.html">JavaScript and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-environment-variables.html">Rails Environment Variables</a></dd>
             <dd><a href="http://railsapps.github.io/rails-git.html">Git and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-github.html">Rails GitHub</a></dd>
             <dd><a href="http://railsapps.github.io/rails-send-email.html">Send Email with Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-haml.html">Haml and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-default-application-layout.html">Rails Application Layout</a></dd>
             <dd><a href="http://railsapps.github.io/rails-html5-boilerplate.html">HTML5 Boilerplate for Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-3-2-example-gemfile.html">Example Gemfiles for Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-application-templates.html">Rails Application Templates</a></dd>
             <dd><a href="http://railsapps.github.io/rails-product-planning.html">Rails Product Planning</a></dd>
             <dd><a href="http://railsapps.github.io/rails-project-management.html">Rails Project Management</a></dd>
           </dl>
           </div>
           <div class="medium-4 large-4 columns">
           <dl class="footer_nav">
             <dt>RailsApps &#183; Tutorials</dt>
             <dd><a href="http://railsapps.github.io/twitter-bootstrap-rails.html">Rails Bootstrap</a></dd>
             <dd><a href="http://railsapps.github.io/rails-foundation.html">Rails Foundation</a></dd>
             <dd><a href="http://railsapps.github.io/rails-omniauth/">OmniAuth Tutorial</a></dd>
             <dd><a href="http://railsapps.github.io/tutorial-rails-devise.html">Rails Devise Tutorial</a></dd>
             <dd><a href="http://railsapps.github.io/tutorial-rails-devise-rspec-cucumber.html">Devise RSpec</a></dd>
             <dd><a href="http://railsapps.github.io/tutorial-rails-bootstrap-devise-cancan.html">Devise Bootstrap</a></dd>
             <dd><a href="http://railsapps.github.io/rails-devise-roles">Role-Based Authorization</a></dd>
             <dd><a href="http://railsapps.github.io/rails-devise-pundit">Rails Authorization with Pundit</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-stripe-membership-saas">Rails Membership Site with Stripe</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-recurly-subscription-saas">Rails Subscription Site with Recurly</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-prelaunch-signup">Startup Prelaunch Signup Application</a></dd>
           </dl>
           <dl class="footer_nav">
            <dt>RailsApps Profile</dt>
            <dd><a href="https://plus.google.com/108039160165742774777?rel=author">Google</a></dd>
            <dd><a href="https://plus.google.com/117374718581973393536" rel="publisher">Find us on Google+</a></dd>
           </dl>
        </div>
      </div>
    </div>
  </footer>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/js/foundation.min.js"></script>
<script>
  $(document).foundation();
</script>
</body>
</html>
