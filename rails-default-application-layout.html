<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Rails Application Layout for HTML5 &#183; RailsApps</title>
  <meta name="viewport" content="width=device-width">
  <link href="https://plus.google.com/117374718581973393536" rel="publisher">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/normalize.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/css/foundation.min.css">
  <link rel="stylesheet" href="http://railsapps.github.io/css/railsapps.css" />
  <link rel="stylesheet" href="http://railsapps.github.io/css/syntax.css" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <script type="text/javascript">
  window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
    window.analytics.load("l1stqfqqbf");
    window.analytics.page();
    window.analytics.ready(function () {
      ga('require', 'linker');
      ga('linker:autoLink', ['railscomposer.com','learn-rails.com','blog.railsapps.org','tutorials.railsapps.org']);
    });
    </script>
</head>
<body>
  <div class="fixed">
    <nav class="top-bar" data-topbar>
      <ul class="title-area">
        <li class="name">
          <a href="http://railsapps.github.io/" class="brand">RailsApps Project</a>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>
      <section class="top-bar-section">
        <ul class="right">
          <li><a href="https://tutorials.railsapps.org/" class="google">Tutorials</a></li>
          <li><a href="http://twitter.com/rails_apps" class="twitter">Twitter</a></li>
          <li><a href="http://blog.railsapps.org/" class="twitter">Blog</a></li>
          <li><a href="https://github.com/RailsApps" class="github">GitHub Repository</a></li>
        </ul>
      </section>
    </nav>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <div class="content wikistyle gollum textile">
        h1. Rails Application Layout

h4. by Daniel Kehoe

_Last updated 3 August 2014_

Rails application layout for HTML5. Shows how to set up an application layout with navigation links, messages for alerts and notices, and CSS styling for Rails.

h4. If You Are New to Rails

If you're new to Rails, see "What is Ruby on Rails?":http://railsapps.github.io/what-is-ruby-rails.html, the book "Learn Ruby on Rails":http://learn-rails.com/learn-ruby-on-rails.html, and recommendations for a "Rails tutorial":https://tutorials.railsapps.org/rails-tutorial.

h4. !http://railsapps.github.io/images/join/join-railsapps.png(Join RailsApps)!:http://railsapps.github.io/

h4. What is the RailsApps Project?

This is an article from the RailsApps project. The "RailsApps project":http://railsapps.github.io/ provides example applications that developers use as starter apps. Hundreds of developers use the apps, report problems as they arise, and propose solutions. Rails changes frequently; each application is known to work and serves as your personal "reference implementation." Each application is accompanied by a tutorial so there is no mystery code. Support for the project comes from subscribers. Please accept our invitation to "join the RailsApps project":http://railsapps.github.io/.

h2. Background

The default application layout is where you put HTML that you want to include on every page of your website.

Every Rails application needs a well-designed application layout. The Rails default starter application, which is created when you run @rails new@, provides a barebones application layout. You'll want to add navigation links, include flash messages for errors and notifications, and apply CSS styling.

Rails will use the layout defined in the file *app/views/layouts/application.html.erb* as a default for rendering any page. See the RailsGuide "Layouts and Rendering in Rails":http://guides.rubyonrails.org/layouts_and_rendering.html#using-render for details. The book "Learn Ruby on Rails":http://learn-rails.com/learn-ruby-on-rails.html provides an in-depth explanation.

h4. HTML5 Boilerplate

The well-known HTML5 Boilerplate project has been recommending "best practice" tweaks to web pages since 2010. Very few of the HTML5 Boilerplate recommendations are relevant for Rails developers, as Rails already provides almost everything required. If you want to learn more, the article "HTML5 Boilerplate for Rails Developers":http://railsapps.github.io/rails-html5-boilerplate.html looks at the recommendations.

h4. Front-end Frameworks

This article shows how to set up a simple application layout with navigation links, messages for alerts and notices, and CSS styling for Rails. If you intend to use a front-end framework such as Bootstrap or Zurb Foundation, see these articles for information about how to set up the application layout:

* "*Rails and Bootstrap*":http://railsapps.github.io/twitter-bootstrap-rails.html
* "*Rails and Foundation*":http://railsapps.github.io/rails-foundation.html

h4. Rails Layout Gem

This article shows how to use the "rails_layout":https://github.com/RailsApps/rails_layout gem to generate files for an application layout, navigation links, and flash messages styled with simple CSS classes and layout. You don't have to use the gem; you can copy the code directly from this article.

h2. Rails Default Application Layout

Generating a new Rails application with the @rails new@ command will create an application layout in the file *app/views/layouts/application.html.erb*. Here is the default with Rails:

<pre>



  Myapp
   true %&gt;
   true %&gt;
  







</pre>

This is a barebones application layout.

It contains a @title@ for your web pages.

The @stylesheet_link_tag@ and @javascript_include_tag@ elements add CSS stylesheets and JavaScript from the "Rails asset pipeline":http://guides.rubyonrails.org/asset_pipeline.html. The @data-turbolinks-track@ attribute supports Rails "Turbolinks":https://github.com/rails/turbolinks/blob/master/README.md.

The @csrf_meta_tags@ element is a view helper that prevents "cross-site request forgeries":https://en.wikipedia.org/wiki/Cross-site_request_forgery when users input data in forms.

The content from a Rails view is inserted where you place the @yield@ keyword. See the RailsGuide "Layouts and Rendering in Rails":http://guides.rubyonrails.org/layouts_and_rendering.html#using-render for details about how Rails combines views with layouts.

h2. The Rails Layout Gem

You can use the "rails_layout":https://github.com/RailsApps/rails_layout gem to generate files for an improved application layout. It will add navigation links and flash messages plus simple CSS classes for styling.

In your *Gemfile*, add:

<pre>
group :development do
  gem 'rails_layout'
end
</pre>

You don’t need the "rails_layout":https://github.com/RailsApps/rails_layout gem deployed to production, so put it in the development group.

Run @$ bundle install@ in the Terminal.

The rails_layout gem uses the @rails generate@ command to create files. Run:

<pre>
$ rails generate layout:install simple --force
</pre>

The @--force@ argument will force the gem to replace the existing *app/views/layouts/application.html.erb* file.

The gem will add five files to your project:

* *app/views/layouts/application.html.erb*
* *app/views/layouts/_messages.html.erb*
* *app/views/layouts/_navigation.html.erb*
* *app/views/layouts/_navigation_links.html.erb*
* *app/assets/stylesheets/simple.css*

Next we'll examine the files created by the "rails_layout":https://github.com/RailsApps/rails_layout gem.

h2. Improved Application Layout

Here is the file *app/views/layouts/application.html.erb* created by the "rails_layout":https://github.com/RailsApps/rails_layout gem:

<pre>


  
    
    
    "&gt;
     true %&gt;
     true %&gt;
    
  
  
     
      
     
    
      
      
    
  

</pre>

h3. Viewport

The @viewport@ metatag improves the presentation of web pages on mobile devices. Setting a viewport tells the browser how content should fit on the device’s screen. Apple’s developer documentation on "Configuring the Viewport":http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html provides details.

h3. Title and Description

The _title_ and _description_ metatags help make your web pages search-engine friendly. Google uses contents of the title tag to display titles in search results. And it will sometimes use the content of a description metatag in search results snippets. See Google’s explanation of how it uses "Site Title and Description":http://support.google.com/webmasters/bin/answer.py?hl=en&amp;answer=35624.

The code uses the Ruby "ternary operator":http://ruby.about.com/od/beginningruby/a/The-Ternary-Or-Conditional-Operator.htm. It is a conditional statement that says, "if @content_for?(:title)@ is present in the view file, use @yield(:title)@ to include it, otherwise just display 'My Application'."

You can use a @content_for@ statement to set a title and description on each individual page.

The combination of @content_for?@ with @yield@ allows you to inject data into the application layout from any view. Set up a view file containing the code:

<pre>
My Title
My Description
</pre>

When a controller renders the view template and combines it with the application layout, the text "My Title" will replace @@ in the application layout. If no @content_for@ block is found in the view template, the alternate text "My Application" will be used.

h3. Body Tag

The simplest form of the @@ tag is all you need for many applications. However, if you're using JavaScript extensively and wish to execute JavaScript conditionally on a page, it's helpful to set the controller name and action in the @@ tag:

<pre>

</pre>

See the article "Adding JavaScript to Rails":http://railsapps.github.io/rails-javascript-include-external.html for details.

h3. HTML5 Elements

The improved application layout contains tags that are structural elements from the HTML5 specification:

* @ @
* @@

These elements add structure to a web page. The tags don't add any new behavior but make it easier to determine the structure of the page and apply CSS styles.

The @ @ tag is typically used for branding or navigation.

We wrap a navigation partial in the @ @ tag:

<pre>
 
  
 
</pre>

The @@ tag is among the newest HTML5 elements (see the "W3C specification":http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element for details). From the specification: "The main content area of a document includes content that is unique to that document and excludes content that is repeated across a set of documents such as site navigation links, copyright information, site logos." We follow the advice of the specification and wrap our unique content in the @@ tag.

The specification recommends, "Authors are advised to use ARIA role='main' attribute on the main element until user agents implement the required role mapping." "ARIA":http://www.w3.org/WAI/intro/aria, the Accessible Rich Internet Applications Suite, is a specification to make web applications more accessible to people with disabilities. That means the @role="main"@ attribute is there for any web browsers that don't yet recognize the @@ tag, and may help people with disabilities.

<pre>

  
  

</pre>

We wrap a messages partial and @yield@ expression in a @@ element.

You could add a @ @ tag. It typically contains links to copyright information, legal disclaimers, or contact information.

h3. Navigation Partial

You’ll likely need navigation links on every page of your web application.

You can add navigation links directly to your application layout file but many developers prefer to create a "partial template":http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials – a "partial" – to better organize the default application layout.

Examine the file *app/views/layouts/_navigation.html.erb*:

<pre>
</pre><ul class="nav">
  <li>
  
</ul>


The navigation partial contains a @link_to@ helper for a navigation link to the application home page. You'll need to set @root to:@ in the *config/routes.rb* file so you'll have a @root_path@ value.

The navigation partial includes a nested partial, the navigation links partial, in the file *app/views/layouts/_navigation_links.html.erb*:

<pre>

</pre>

As you add pages to your application, you can add links to this file.

In a simple application, it is not necessary to nest a navigation links partial. Use it to isolate the complex markup required by a front-end framework from a simple list of links needed for navigation, if you wish.

h3. Flash Messages

Rails provides a standard convention to display alerts (including error messages) and other notices (including success messages), called a <em>flash message</em>. The name comes from the term "flash memory" and should not be confused with the "Adobe Flash" web development platform that was once popular for animated websites. The flash message is documented in the "RailsGuides: Action Controller Overview":http://guides.rubyonrails.org/action_controller_overview.html#the-flash.

Code to display flash messages can go directly in your application layout file or you can use a partial.

Here the application layout references a partial contained in the file *app/views/layouts/_messages.html.erb*:

<pre>

  
     "flash_#{name}" %&gt;
  

</pre>

We use @each@ to iterate through the flash hash, retrieving a @name@ and @msg@ that are passed to a block to be output as a string. The expression @if msg.is_a?(String)@ serves as a test to make sure we only display messages that are strings. We use the Rails @content_tag@ view helper to create the HTML @div@. Finally, we apply a CSS @class@ and combine the word "flash" with "notice" or "alert" to make the CSS class.

h2. Simple CSS

The "rails_layout":https://github.com/RailsApps/rails_layout gem adds a CSS file for simple styling of the navigation links and flash messages. If you don’t want to use Twitter Bootstrap, Zurb Foundation, or another CSS front-end framework, you can apply simple CSS styling for your navigation links and flash messages with the following code.

Examine the file *app/assets/stylesheets/simple.css*:

<pre>
/*
 * Simple CSS stylesheet for a navigation bar and flash messages.
 */
main {
  background-color: #eee;
  padding-bottom: 80px;
  width: 100%;
  }
header {
  border: 1px solid #d4d4d4;
  background-image: linear-gradient(to bottom, white, #f2f2f2);
  background-color: #f9f9f9;
  -webkit-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
}
ul.nav li {
  display: inline;
}
ul.nav li a {
  padding: 10px 15px 10px;
  color: #777777;
  text-decoration: none;
  text-shadow: 0 1px 0 white;
}
.flash_notice, .flash_alert {
  padding: 8px 35px 8px 14px;
  margin-bottom: 20px;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
  border: 1px solid #fbeed5;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 20px;
}
.flash_notice {
  background-color: #dff0d8;
  border-color: #d6e9c6;
  color: #468847;
}
.flash_alert {
  background-color: #f2dede;
  border-color: #eed3d7;
  color: #b94a48;
}
</pre>

The CSS rules set a background color for the @main@ section of the page, plus styles for a header, navigation links, and flash messages.

h2. Did You Like the Article?

Was the article useful to you? Follow "@rails_apps":http://twitter.com/rails_apps on Twitter and tweet some praise. I'd love to know you were helped out by the article.

You can also find me on "Facebook":https://www.facebook.com/daniel.kehoe.sf or "Google+":https://plus.google.com/+DanielKehoe/.
    
      </div>
      <div class="comments" id="comments">
        <div class="content wikistyle gollum">
          <h2>Comments</h2>
        </div>
        <p>Is this helpful? Your encouragement fuels the project. Please tweet or add a comment. Couldn't get something to work? For the example apps and tutorials, it's best to open an issue on GitHub so we can help you.</p>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'railsapps'; // required: replace example with your forum shortname
            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div><!-- class="comments" -->
    </div><!-- class="columns" -->
  </div><!-- class="row" -->
  <footer class="row">
    <div class="large-12 columns">
      <div class="row">
         <div class="medium-4 large-4 columns">
           <dl class="footer_nav">
             <dt>RailsApps &#183; Getting Started</dt>
             <dd><a href="http://railsapps.github.io/ruby-and-rails.html">Ruby on Rails</a></dd>
             <dd><a href="http://railsapps.github.io/what-is-ruby-rails.html">What is Ruby on Rails?</a></dd>
             <dd><a href="http://learn-rails.com/learn-ruby-on-rails.html">Learn Ruby on Rails</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-tutorial">Rails Tutorial</a></dd>
             <dd><a href="http://learn-rails.com/ruby-on-rails-tutorial-for-beginners">Ruby on Rails Tutorial for Beginners</a></dd>
             <dd><a href="http://railsapps.github.io/installing-rails.html">Install Ruby on Rails</a></dd>
             <dd><a href="http://railsapps.github.io/installrubyonrails-mac.html">Install Ruby on Rails - Mac OS X</a></dd>
             <dd><a href="http://railsapps.github.io/installrubyonrails-ubuntu.html">Install Ruby on Rails - Ubuntu</a></dd>
             <dd><a href="http://railsapps.github.io/rubyonrails-nitrous-io.html">Ruby on Rails - Nitrous.io</a></dd>
             <dd><a href="http://railsapps.github.io/updating-rails.html">Update Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-composer/">Rails Composer</a></dd>
             <dd><a href="http://railsapps.github.io/">Rails Examples</a></dd>
             <dd><a href="http://railsapps.github.io/rails-examples-tutorials.html">Rails Starter Apps</a></dd>
           </dl>
         </div>
         <div class="medium-4 large-4 columns">
           <dl class="footer_nav">
             <dt>RailsApps &#183; Articles</dt>
             <dd><a href="http://railsapps.github.io/rails-authorization.html">Rails Authorization</a></dd>
             <dd><a href="http://railsapps.github.io/rails-google-analytics.html">Analytics for Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-heroku-tutorial.html">Heroku and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-javascript-include-external.html">JavaScript and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-environment-variables.html">Rails Environment Variables</a></dd>
             <dd><a href="http://railsapps.github.io/rails-git.html">Git and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-github.html">Rails GitHub</a></dd>
             <dd><a href="http://railsapps.github.io/rails-send-email.html">Send Email with Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-haml.html">Haml and Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-default-application-layout.html">Rails Application Layout</a></dd>
             <dd><a href="http://railsapps.github.io/rails-html5-boilerplate.html">HTML5 Boilerplate for Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-3-2-example-gemfile.html">Example Gemfiles for Rails</a></dd>
             <dd><a href="http://railsapps.github.io/rails-application-templates.html">Rails Application Templates</a></dd>
             <dd><a href="http://railsapps.github.io/rails-product-planning.html">Rails Product Planning</a></dd>
             <dd><a href="http://railsapps.github.io/rails-project-management.html">Rails Project Management</a></dd>
           </dl>
           </div>
           <div class="medium-4 large-4 columns">
           <dl class="footer_nav">
             <dt>RailsApps &#183; Tutorials</dt>
             <dd><a href="http://railsapps.github.io/twitter-bootstrap-rails.html">Rails Bootstrap</a></dd>
             <dd><a href="http://railsapps.github.io/rails-foundation.html">Rails Foundation</a></dd>
             <dd><a href="http://railsapps.github.io/rails-omniauth/">OmniAuth Tutorial</a></dd>
             <dd><a href="http://railsapps.github.io/tutorial-rails-devise.html">Rails Devise Tutorial</a></dd>
             <dd><a href="http://railsapps.github.io/tutorial-rails-devise-rspec-cucumber.html">Devise RSpec</a></dd>
             <dd><a href="http://railsapps.github.io/tutorial-rails-bootstrap-devise-cancan.html">Devise Bootstrap</a></dd>
             <dd><a href="http://railsapps.github.io/rails-devise-roles">Role-Based Authorization</a></dd>
             <dd><a href="http://railsapps.github.io/rails-devise-pundit">Rails Authorization with Pundit</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-stripe-membership-saas">Rails Membership Site with Stripe</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-recurly-subscription-saas">Rails Subscription Site with Recurly</a></dd>
             <dd><a href="https://tutorials.railsapps.org/rails-prelaunch-signup">Startup Prelaunch Signup Application</a></dd>
           </dl>
           <dl class="footer_nav">
            <dt>RailsApps Profile</dt>
            <dd><a href="https://plus.google.com/108039160165742774777?rel=author">Google</a></dd>
            <dd><a href="https://plus.google.com/117374718581973393536" rel="publisher">Find us on Google+</a></dd>
           </dl>
        </div>
      </div>
    </div>
  </footer>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.2/js/foundation.min.js"></script>
<script>
  $(document).foundation();
</script>
</body>
</html>
