<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <title>Workbook</title>
    <meta content='Workbook for Ruby on Rails workshop.' name='description'>
    <meta content='Rails Tutorial' name='keywords'>

    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="http://railsapps.github.io/css/tutorials.css" type="text/css" />
    <link rel="stylesheet" href="http://railsapps.github.io/css/github.css" type="text/css" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
    <script src="http://railsapps.github.io/javascript/tutorials.js"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-5109366-14']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body class='tutorials show' data-spy='scroll' data-target='.bs-docs-sidebar'>





<div class="container">
  <div class="row">
    <div class="span3 bs-docs-sidebar">
      <ul class="nav nav-list bs-docs-sidenav">
        <li>
          <div class="tutorial-account">
            <a href="https://tutorials.railsapps.org/plan/portal" class="brand">Tutorials</a><span class="pull-right"><a href="https://tutorials.railsapps.org/logout">Logout</a></span>
          </div>
        </li>
        <li>
          <ul class="tutorial-links">
            <li><span class="uppercase repotitle">workbook</span></li>
            <li>By Daniel Kehoe</li>
            <li>Last updated 26 May 2013</li>
            <li><a href="https://github.com/RailsApps/workbook">GitHub Repository</a></li>
            <li><a href="https://github.com/RailsApps/workbook/issues">GitHub Issues</a></li>
            <li><a href="#comments">Comments</a></li>
          </ul>
        </li>
        <li class="level2"><a href="#">CONTENTS</a></li>
        <li class='level2'><a href='#introduction'><i class='icon-chevron-right'></i> Introduction</a></li>
<li class='level2'><a href='#concepts'><i class='icon-chevron-right'></i> Concepts</a></li>
<li class='level2'><a href='#getting-help'><i class='icon-chevron-right'></i> Getting Help</a></li>
<li class='level2'><a href='#product-planning'><i class='icon-chevron-right'></i> Product Planning</a></li>
<li class='level2'><a href='#project-management'><i class='icon-chevron-right'></i> Project Management</a></li>
<li class='level2'><a href='#accounts-you-will-need'><i class='icon-chevron-right'></i> Accounts You Will Need</a></li>
<li class='level2'><a href='#getting-started'><i class='icon-chevron-right'></i> Getting Started</a></li>
<li class='level2'><a href='#create-the-application'><i class='icon-chevron-right'></i> Create the Application</a></li>
<li class='level2'><a href='#rails-directory-structure'><i class='icon-chevron-right'></i> Rails Directory Structure</a></li>
<li class='level2'><a href='#source-control-with-git'><i class='icon-chevron-right'></i> Source Control with Git</a></li>
<li class='level2'><a href='#gems'><i class='icon-chevron-right'></i> Gems</a></li>
<li class='level2'><a href='#configuration'><i class='icon-chevron-right'></i> Configuration</a></li>
<li class='level2'><a href='#static-pages-and-routing'><i class='icon-chevron-right'></i> Static Pages and Routing</a></li>
<li class='level2'><a href='#dynamic-home-page'><i class='icon-chevron-right'></i> Dynamic Home Page</a></li>
<li class='level2'><a href='#troubleshooting'><i class='icon-chevron-right'></i> Troubleshooting</a></li>
<li class='level2'><a href='#just-enough-ruby'><i class='icon-chevron-right'></i> Just Enough Ruby</a></li>
<li class='level2'><a href='#layout-and-views'><i class='icon-chevron-right'></i> Layout and Views</a></li>
<li class='level2'><a href='#stylesheets-and-twitter-bootstrap'><i class='icon-chevron-right'></i> Stylesheets and Twitter Bootstrap</a></li>
<li class='level2'><a href='#adding-pages'><i class='icon-chevron-right'></i> Adding Pages</a></li>
<li class='level2'><a href='#contact-form'><i class='icon-chevron-right'></i> Contact Form</a></li>
<li class='level2'><a href='#sending-mail'><i class='icon-chevron-right'></i> Sending Mail</a></li>
<li class='level2'><a href='#deploy'><i class='icon-chevron-right'></i> Deploy</a></li>
<li class='level2'><a href='#whats-next'><i class='icon-chevron-right'></i> What’s Next?</a></li>

      </ul>
    </div>
    <div class="span9">
      <div class="jumbotron subhead">
        <h1>RailsApps Tutorials</h1>
        <p class="lead">Ruby and Rails Accelerator Training </p>
      </div>

  <section class='chapter' id='introduction'><h2>Introduction</h2>
<p>Welcome. This is the workbook for the <em>Ruby and Rails Accelerator Training</em>.</p>
<p>The <em>Ruby and Rails Accelerator Training</em> is a weekend workshop taught by Daniel Kehoe.</p>
<p>This workbook contains code you can copy and paste as you participate in the course.</p>
<p>You’ll also find links to references we’ll look at it during the course.</p>
<h3 id="citizen-space">Citizen Space</h3>
<p>Citizen Space is the organizer and host for the <em>Ruby and Rails Accelerator Training</em>.</p>
<ul>
  <li><a href="https://citizenspace.us/">Citizen Space</a></li>
</ul>
<h3 id="daniel-kehoe">Daniel Kehoe</h3>
<p>Daniel Kehoe has been involved with the development of the Web since its beginnings in 1991. He is a former writer and editor at PC <span class="caps">WORLD</span> and NeXTWORLD magazines who has been working with Rails since 2006 as a developer and <span class="caps">CTO</span> in various startups. He now works full time on the RailsApps project, an open source project to build <a href="http://railsapps.github.io/">Rails example applications</a> and <a href="https://tutorials.railsapps.org/">Rails tutorials</a>.</p>
<ul>
  <li><a href="https://tutorials.railsapps.org/pages/about">Daniel’s Bio</a></li>
  <li>Follow <a href="https://twitter.com/rails_apps">@rails_apps</a> on Twitter</li>
  <li><a href="https://www.facebook.com/daniel.kehoe.sf?ref=tn_tnmn">Daniel on Facebook</a></li>
  <li><a href="http://www.linkedin.com/in/danielkehoe">Daniel on LinkedIn</a></li>
</ul>
<h3 id="railsapps">RailsApps</h3>
<p>The RailsApps project is an open source project to build Rails example applications, founded in 2010 by Daniel Kehoe. The project is supported by subscriptions to tutorials.</p>
<ul>
  <li><a href="http://railsapps.github.io/">Rails example applications</a></li>
  <li><a href="https://github.com/RailsApps">RailsApps on GitHub</a></li>
  <li><a href="https://tutorials.railsapps.org/">Rails tutorials</a></li>
</ul>
<h3 id="who-is-this-for">Who Is This For?</h3>
<p>This workshop is ideal if you are:</p>
<ul>
  <li>a student</li>
  <li>a startup founder</li>
  <li>making a career change</li>
</ul>
<p>You’ll learn to build Rails web applications and you’ll become comfortable with the Unix command line interface and the Ruby programming language.</p>
<h3 id="goals">Goals</h3>
<p>This workshop is good preparation for:</p>
<ul>
  <li>advanced tutorials in the <a href="https://tutorials.railsapps.org/">RailsApps Tutorials</a> series</li>
  <li>textbooks such as Michael Hartl’s <a href="http://ruby.railstutorial.org/ruby-on-rails-tutorial-book">Ruby on Rails Tutorial</a></li>
  <li>intensive training such as <a href="http://devbootcamp.com">DevBootcamp</a> or <a href="generalassemb.ly">General Assembly</a></li>
</ul>
<p>This workshop gives you the basics while introducing you to the tools and techniques of professional Rails development.</p>
</section>
<section class='chapter' id='concepts'><h2>Concepts</h2>
<p>Article: <a href="http://railsapps.github.io/what-is-ruby-rails.html">What is Ruby? And Rails?</a> (a good primer)</p>
<h3 id="how-rails-works">How Rails Works</h3>
<p>Why use a web application server?</p>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">separation of concerns</a></p>
<h3 id="six-perspectives-on-a-rails-application">Six Perspectives On a Rails Application</h3>
<ul>
  <li>perspective of the <strong>web browser</strong></li>
  <li>perspective of a <strong>programmer</strong></li>
  <li>perspective of a <strong>software architect</strong></li>
  <li>perspective of a <strong>time traveler</strong></li>
  <li>perspective of a <strong>gem hunter</strong></li>
  <li>perspective of a <strong>tester</strong></li>
</ul>
<h4 id="perspective-of-a-software-architect">perspective of a software architect</h4>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Software_pattern">software design patterns</a><br />
Concept: <a href="http://en.wikipedia.org/wiki/Model%E2%80%93View%E2%80%93Controller">model–view–controller</a> design pattern<br />
Reference: <a href="http://api.rubyonrails.org/">Rails <span class="caps">API</span></a></p>
<h4 id="perspective-of-a-time-traveler">perspective of a time traveler</h4>
<p>Reference: <a href="http://en.wikipedia.org/wiki/Git_(software)">Git</a><br />
Reference: <a href="https://github.com/">GitHub</a></p>
<h3 id="stacks">Stacks</h3>
<h4 id="lamp-stack"><a href="http://en.wikipedia.org/wiki/LAMP_(software_bundle)"><span class="caps">LAMP</span></a> Stack</h4>
<ul>
  <li>Linux (operating system)</li>
  <li>Apache (web server)</li>
  <li>MySQL (database)</li>
  <li><span class="caps">PHP</span> (programming language)</li>
</ul>
<h4 id="rails-ruby-stack">Rails/Ruby Stack</h4>
<ul>
  <li>Mac OS X, Linux, or Windows</li>
  <li>WEBrick (web server)</li>
  <li>SQLite (database)</li>
  <li>Ruby on Rails (language and framework)</li>
</ul>
<h4 id="37signals-stack"><a href="http://37signals.com/">37signals</a> Stack</h4>
<ul>
  <li><span class="caps">ERB</span> for view templates</li>
  <li>MySQL for databases</li>
  <li>MiniTest for testing</li>
</ul>
<h4 id="alternative-stack">Alternative Stack</h4>
<ul>
  <li>Haml for view templates</li>
  <li>PostgreSQL for databases</li>
  <li>Rspec for testing</li>
</ul>
</section>
<section class='chapter' id='getting-help'><h2>Getting Help</h2>
<h3 id="references">References</h3>
<p>Reference: <a href="http://railsapps.github.io/ruby-and-rails.html">RailsApps top resources for Ruby and Rails</a></p>
<h4 id="railsguides">RailsGuides</h4>
<p>Reference: <a href="http://guides.rubyonrails.org/">Rails Guides</a> official documentation</p>
<h4 id="cheatsheets">Cheatsheets</h4>
<p>Reference: <a href="http://pragtob.github.io/rails-beginner-cheatsheet/index.html">Rails Beginner Cheat Sheet</a></p>
<h4 id="api-documentation"><span class="caps">API</span> Documentation</h4>
<ul>
  <li><a href="http://api.rubyonrails.org/">Rails Documentation</a> – official <span class="caps">API</span> docs</li>
  <li><a href="http://railsapi.com/">Rails Searchable <span class="caps">API</span> Doc</a> – alternative interface for the <span class="caps">API</span> docs</li>
  <li><a href="http://apidock.com/rails">apidock.com/rails</a> – Rails <span class="caps">API</span> docs with usage note</li>
  <li><a href="http://apidock.com/ruby">apidock.com/ruby</a> – Ruby <span class="caps">API</span> docs with usage notes</li>
</ul>
<h3 id="getting-help-2">Getting Help</h3>
<p>Reference: Google<br />
Reference: <a href="http://stackoverflow.com/questions/tagged/ruby-on-rails-3">Stack Overflow</a><br />
Reference: <a href="http://www.railshotline.com/">Rails Hotline</a></p>
<h3 id="meetups-hack-nights-and-workshops">Meetups, Hack Nights, and Workshops</h3>
<p>Reference: <a href="http://www.meetup.com/">Meetup.com</a><br />
Concept: <a href="http://en.wikipedia.org/wiki/Hackathon">hackathons</a><br />
For women: <a href="http://workshops.railsbridge.org/">RailsBridge</a><br />
For women: <a href="http://railsgirls.com/">Rails Girls</a></p>
<h3 id="pair-programming">Pair Programming</h3>
<p>Resource: <a href="http://www.pairprogramwith.me/">pairprogramwith.me</a><br />
Resource: <a href="http://rubypair.com/">rubypair.com</a><br />
Resource: <a href="http://www.letspair.net/">letspair.net</a>.</p>
</section>
<section class='chapter' id='product-planning'><h2>Product Planning</h2>
<p>Article: <a href="http://railsapps.github.io/rails-project-management.html">Rails and Product Planning</a></p>
<h3 id="product-owner">Product Owner</h3>
<p>Concept: <em>product owner</em></p>
<h3 id="user-stories">User Stories</h3>
<p>Concept: <a href="http://en.wikipedia.org/wiki/User_story">User stories</a></p>
<p>User stories are often expressed in the following format:</p>
<div class="highlight"><pre><span class="nf">As a </span><span class="nv">&lt;role&gt;</span><span class="nf"></span>
<span class="k">I </span><span class="nf">want </span><span class="nv">&lt;goal&gt;</span><span class="nf"></span>
<span class="nf">so that </span><span class="nv">&lt;benefit&gt;</span><span class="nf"></span>
</pre></div><p>Here is an example:</p>
<div class="highlight"><pre><span class="nf">*Join Mailing List*</span>
<span class="nf">As a visitor to the website</span>
<span class="k">I </span><span class="nf">want to join a mailing list</span>
<span class="nf">so I can receive news and announcements</span>
</pre></div><h3 id="wireframes-and-mockups">Wireframes and Mockups</h3>
<p>Concept: <em>wireframe</em><br />
Concept: <em>mockup</em></p>
<h3 id="graphic-design">Graphic Design</h3>
<p>Concept: <em>user experience</em> (UX) <em>designer</em><br />
Concept: <em>interaction designer</em> (IxD)</p>
<p>Concept: <em>moodboard</em><br />
Concept: <em>design brief</em></p>
<p>Concept: Photoshop <span class="caps">PSD</span> to <span class="caps">HTML</span>/<span class="caps">CSS</span></p>
<p>Concept: Rails <em>view</em> files in <em><span class="caps">ERB</span></em> or <em>Haml</em></p>
<p>Resource: <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a><br />
Resource: <a href="http://foundation.zurb.com/">Zurb Foundation</a></p>
<h3 id="behavior-driven-development">Behavior-Driven Development</h3>
<p>Concept: <em>Behavior-Driven Development</em> (<span class="caps">BDD</span>)<br />
Concept: <em>acceptance testing</em><br />
Concept: <em>integration testing</em></p>
</section>
<section class='chapter' id='project-management'><h2>Project Management</h2>
<p>Article: <a href="http://railsapps.github.io/rails-project-management.html">Rails and Project Management</a></p>
<h3 id="to-do-list">To-Do List</h3>
<p>Reference: <a href="http://en.wikipedia.org/wiki/Getting_Things_Done">Getting Things Done</a></p>
<p>Resource: <a href="http://www.priacta.com/Articles/Comparison_of_GTD_Software.php">150+ <span class="caps">GTD</span> and to-do list applications</a></p>
<h4 id="personal-task-management">Personal Task Management</h4>
<ul>
  <li><a href="http://www.toodledo.com/">Toodledo</a></li>
  <li><a href="http://culturedcode.com/things/">Things</a></li>
  <li><a href="http://todoist.com/">Todoist</a></li>
  <li><a href="http://www.rememberthemilk.com/">Remember The Milk</a></li>
  <li><a href="http://www.omnigroup.com/products/omnifocus/">Omnifocus</a></li>
  <li><a href="http://www.6wunderkinder.com/wunderlist/">Wunderlist</a></li>
</ul>
<h4 id="team-task-management">Team Task Management</h4>
<ul>
  <li><a href="https://trello.com/">Trello</a></li>
  <li><a href="http://asana.com/">Asana</a></li>
  <li><a href="http://basecamp.com/">Basecamp</a></li>
  <li><a href="http://www.producteev.com/">Producteev</a></li>
  <li><a href="http://getflow.com/">Flow</a></li>
</ul>
<h3 id="kanban">Kanban</h3>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Kanban_(development)">Kanban</a><br />
Reference: <a href="http://en.wikipedia.org/wiki/Lean_manufacturing">lean manufacturing</a></p>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Swim_lane">swimlanes</a></p>
<p>Swimlanes: Backlog, Ready, Coding, Testing, Done</p>
<ul>
  <li><a href="https://trello.com/">Trello</a></li>
  <li><a href="https://kanbanery.com/">Kanbanery</a></li>
  <li><a href="http://leankit.com/">LeanKit</a></li>
</ul>
<p>Resource: <a href="http://www.quora.com/Lean-Software-Development/What-is-the-best-online-tool-for-Agile-development-using-Kanban">online kanban applications</a></p>
<h3 id="agile-methodologies">Agile Methodologies</h3>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Agile_software_development">Agile software development</a> methodologies</p>
<p>Resource: <a href="http://www.pivotaltracker.com/">Pivotal Tracker</a><br />
Resource: <a href="http://agilescout.com/best-agile-scrum-tools/">agile tools</a></p>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Waterfall_model">waterfall process</a></p>
<h3 id="project-management-in-startups">Project Management in Startups</h3>
<p>Article: <a href="http://community.uservoice.com/blog/trello-google-docs-product-management/">How we use Trello &amp; Google Docs to make UserVoice better every day</a><br />
Article: <a href="http://www.skroutz.gr/blog/posts/76-how-we-manage-to-manage">How we manage to manage</a></p>
</section>
<section class='chapter' id='accounts-you-will-need'><h2>Accounts You Will Need</h2>
<h3 id="github">GitHub</h3>
<p><a href="https://github.com/signup/free">free personal GitHub account</a></p>
<h3 id="mailchimp">MailChimp</h3>
<p><a href="http://mailchimp.com/">MailChimp</a></p>
</section>
<section class='chapter' id='getting-started'><h2>Getting Started</h2>
<h3 id="your-computer">Your Computer</h3>
<h4 id="mac-os-x">Mac OS X</h4>
<h4 id="linux">Linux</h4>
<h4 id="windows">Windows</h4>
<h4 id="hosted-computing">Hosted Computing</h4>
<p>Resource: <a href="https://www.nitrous.io/">Nitrous.io</a></p>
<h3 id="text-editor">Text Editor</h3>
<p>Resource: <a href="http://www.sublimetext.com/">Sublime Text 2</a><br />
Video: <a href="http://www.youtube.com/watch?v=TZ-bgcJ6fQo">Perfect Workflow in Sublime Text 2</a></p>
<h3 id="terminal">Terminal</h3>
<p>Resource: <a href="http://en.wikipedia.org/wiki/Terminal.app">Terminal application</a> (Mac)<br />
Resource: <a href="http://www.iterm2.com/#/section/home">iTerm2</a> (Mac)<br />
Resource: <a href="http://en.wikipedia.org/wiki/Windows_PowerShell">PowerShell</a> (Windows)</p>
<p>Article: <a href="http://cli.learncodethehardway.org/book/ex1.html">How to launch a terminal application</a></p>
<p>Book: <a href="http://cli.learncodethehardway.org/book/">The Command Line Crash Course</a></p>
<div class="highlight"><pre><span class="gp">$</span> whoami
</pre></div><p>Don’t type the <code>$</code> prompt.</p>
<p>You might see:</p>
<div class="highlight"><pre><span class="go">command not found: $</span>
</pre></div><p>which indicates you typed the <code>$</code> character by mistake.</p>
<h4 id="getting-fancy">Getting Fancy</h4>
<p>Reference: <a href="http://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash shell</a><br />
Resource: <a href="https://github.com/revans/bash-it">Bash-it</a> utility</p>
<p>Resource: <a href="http://en.wikipedia.org/wiki/Z_shell">Z shell</a><br />
Resource: <a href="https://github.com/robbyrussell/oh-my-zsh">Oh-my-zsh</a> utility</p>
<h3 id="installing-ruby">Installing Ruby</h3>
<p>Three options:</p>
<p><em>1)</em> Use <span class="caps">RVM</span>, the <a href="https://rvm.io/">Ruby Version Manager</a><br />
Article: <a href="http://railsapps.github.io/installing-rails.html">Installing Rails</a></p>
<p><em>2)</em> Use the <a href="http://railsinstaller.org/">RailsInstaller</a> pre-assembled installation package<br />
Article: <a href="http://installfest.railsbridge.org/installfest/">RailsBridge Installfest</a></p>
<p><em>3)</em> <a href="https://www.nitrous.io/">Nitrous.io</a> browser-based development environment</p>
<h3 id="ruby-2-0-and-rails-4-0">Ruby 2.0 and Rails 4.0</h3>
<p>You’ll need:</p>
<ul>
  <li>The Ruby language (version 2.0.0 or newer)</li>
  <li>The Rails gem (version 3.2)</li>
</ul>
<p>Concept: <em>semantic versioning</em></p>
<p>Open your terminal application and enter:</p>
<div class="highlight"><pre><span class="gp">$</span> ruby -v
</pre></div><p>You might see:</p>
<div class="highlight"><pre><span class="go">ruby 2.0.0p0 (...)</span>
</pre></div><p>Try:</p>
<div class="highlight"><pre><span class="gp">$</span> rails -v
</pre></div><p>You might see:</p>
<div class="highlight"><pre><span class="go">Rails 3.2.13</span>
</pre></div><p>Versions such as <code>4.0.0.beta1</code> or <code>4.0.0.rc1</code> are beta versions or “release candidates.”</p>
<p>Resource: <a href="http://rubygems.org/gems/rails">current version of Rails</a></p>
<h3 id="rvm"><span class="caps">RVM</span></h3>
<p>You can see a list of available Ruby versions:</p>
<div class="highlight"><pre><span class="gp">$</span> rvm list
</pre></div><p>Concept: <em><span class="caps">RVM</span> gemsets</em></p>
<p>You can see a list of available gemsets associated with the default Ruby version:</p>
<div class="highlight"><pre><span class="gp">$</span> rvm gemset list
</pre></div><h4 id="alternatives-to-rvm">Alternatives to <span class="caps">RVM</span></h4>
<ul>
  <li><a href="https://github.com/postmodern/chruby">Chruby</a></li>
  <li><a href="https://github.com/sstephenson/rbenv">rbenv</a></li>
  <li><a href="https://github.com/wayneeseguin/rvm/blob/master/help/alt.md">others</a></li>
</ul>
<h3 id="project-specific-gemset">Project-Specific Gemset</h3>
<p>Enter these commands:</p>
<div class="highlight"><pre><span class="gp">$</span> rvm use ruby-2.0.0@railsapps-learning-rails --create
<span class="gp">$</span> gem install rails
</pre></div><p>Enter:</p>
<div class="highlight"><pre><span class="gp">$</span> rails -v
</pre></div><p>You should see the message “Rails 3.2.13”.</p>
</section>
<section class='chapter' id='create-the-application'><h2>Create the Application</h2>
<h3 id="frameworks-and-starter-applications">Frameworks and Starter Applications</h3>
<p>Concept: <em>framework</em><br />
Concept: <em>starter application</em><br />
Resource: <a href="http://railsapps.github.io/">RailsApps project</a></p>
<h3 id="rails-new-command">“Rails New” Command</h3>
<p>We already created a project-specific gemset using <span class="caps">RVM</span>. Make sure it’s ready to use:</p>
<div class="highlight"><pre><span class="gp">$</span> rvm use ruby-2.0.0@railsapps-learning-rails
</pre></div><p>Now type:</p>
<div class="highlight"><pre><span class="gp">$</span> rails new --help
</pre></div><p>You’ll see a help message that shows all the options for the “rails new” command.</p>
<p>You’ll see a summary of the command syntax:</p>
<div class="highlight"><pre><span class="go">Usage:</span>
<span class="go">  rails new APP_PATH [options]</span>
</pre></div><p>You’ll see a list of command options and an explanation of what the “rails new” command will do:</p>
<div class="highlight"><pre><span class="go">The 'rails new' command creates a new Rails application with a default</span>
<span class="go">directory structure and configuration at the path you specify.</span>
</pre></div><h3 id="building-the-application">Building the Application</h3>
<p>Open a terminal, navigate to a folder where you have rights to create files, and type:</p>
<div class="highlight"><pre><span class="gp">$</span> rails new railsapps-learning-rails -T
</pre></div><p>Use the <code>-T</code> flag to skip Test::Unit files.</p>
<p>After you create the application, switch to its folder to continue work directly in the application:</p>
<div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>railsapps-learning-rails
</pre></div><p>Enter this command to create <span class="caps">RVM</span> hidden files:</p>
<div class="highlight"><pre><span class="gp">$</span> rvm use ruby-2.0.0@railsapps-learning-rails --ruby-version
</pre></div><p>The command creates two files, <strong>.ruby-version</strong> and <strong>.ruby-gemset</strong>, that set <span class="caps">RVM</span> every time we <code>cd</code> to the project directory.</p>
<h3 id="test-the-application">Test the Application</h3>
<h4 id="launching-the-web-server">Launching the Web Server</h4>
<p>You can launch the application by entering the command:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>You’ll see:</p>
<div class="highlight"><pre><span class="go">=&gt; Booting WEBrick</span>
<span class="go">=&gt; Rails 3.2.13 application starting in development on http://0.0.0.0:3000</span>
<span class="go">=&gt; Run `rails server -h` for more startup options</span>
<span class="go">=&gt; Ctrl-C to shutdown server</span>
<span class="go">[...] INFO  WEBrick 1.3.1</span>
<span class="go">[...] INFO  ruby 2.0.0 (2013-02-24) [x86_64-darwin12.2.0]</span>
<span class="go">[...] INFO  WEBrick::HTTPServer#start: pid=38534 port=3000</span>
</pre></div><p>The <code>rails server</code> command launches the default <a href="http://en.wikipedia.org/wiki/WEBrick">WEBrick web server</a> that is provided with Ruby.</p>
<h4 id="web-browser">Web Browser</h4>
<p>To see your application in action, open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>. You’ll see the Rails default information page.</p>
<h4 id="log-messages">Log Messages</h4>
<p>Notice that messages scroll in the console window when your browser requests the Rails default web page.</p>
<p>Open the file <strong>log/development.log</strong> and you’ll see the same messages.</p>
<h4 id="stopping-the-web-server">Stopping the Web Server</h4>
<p>You can stop the server with Control-C to return to the command prompt.</p>
<p><em>Note:</em> Most of the time you’ll keep the web server running as you add or edit files in your project. Changes will automatically appear when you refresh the browser or request a new page. There is a tricky exception, however. If you make changes to the Gemfile, or changes to configuration files, the web server must be shut down and relaunched for changes to be activated.</p>
<h3 id="getting-organized-for-efficiency">Getting Organized for Efficiency</h3>
<ul>
  <li>terminal application</li>
  <li>text editor</li>
  <li>web browser window</li>
</ul>
</section>
<section class='chapter' id='rails-directory-structure'><h2>Rails Directory Structure</h2>
<p>Use the Unix <code>ls</code> command to list the contents of the project directory. For a one-column list that shows each subdirectory (marked with a slash), we’ll add the <code>-1p</code> option to the command.</p>
<div class="highlight"><pre><span class="gp">$</span> ls -1p
</pre></div><p>You’ll see:</p>
<div class="highlight"><pre><span class="go">Gemfile</span>
<span class="go">Gemfile.lock</span>
<span class="go">README.rdoc</span>
<span class="go">Rakefile</span>
<span class="go">app/</span>
<span class="go">bin/</span>
<span class="go">config/</span>
<span class="go">config.ru</span>
<span class="go">db/</span>
<span class="go">lib/</span>
<span class="go">log/</span>
<span class="go">public/</span>
<span class="go">tmp/</span>
<span class="go">vendor/</span>
</pre></div><p><em>Note:</em> On the Mac, there’s a command you can use to open the graphical file browser from the console. If you’re in the project directory, type <code>open .</code>. The period (or “dot”) is a Unix symbol that means “the directory I’m in.”</p>
<div class="highlight"><pre><span class="gp">$</span> open .
</pre></div><h3 id="important-folders-and-files">Important Folders and Files</h3>
<table>
  <tr>
    <td> Gemfile </td>
    <td> Lists all the gems used by the application. </td>
  </tr>
  <tr>
    <td> Gemfile.lock </td>
    <td> Lists gem versions and dependencies. </td>
  </tr>
  <tr>
    <td> <span class="caps">README</span>.rdoc </td>
    <td> A page for documentation. </td>
  </tr>
  <tr>
    <td> app/ </td>
    <td> Application folders and files. </td>
  </tr>
  <tr>
    <td> config/ </td>
    <td> Configuration folders and files. </td>
  </tr>
  <tr>
    <td> db/ </td>
    <td> Database folders and files. </td>
  </tr>
  <tr>
    <td> public/ </td>
    <td> Files for web pages that do not contain Ruby code, such as error pages. </td>
  </tr>
</table>
<h3 id="not-so-important-folders-and-files">Not-So-Important Folders and Files</h3>
<table>
  <tr>
    <td> Rakefile </td>
    <td> Directives for the Rake utility program. </td>
  </tr>
  <tr>
    <td> bin/ </td>
    <td> Folder for binary (executable) programs. </td>
  </tr>
  <tr>
    <td> config.ru </td>
    <td> Configuration file for Rack (a software library for web servers). </td>
  </tr>
  <tr>
    <td> lib/ </td>
    <td> Folder for miscellaneous Ruby code. </td>
  </tr>
  <tr>
    <td> log/ </td>
    <td> Folder for application server logfiles. </td>
  </tr>
  <tr>
    <td> tmp/ </td>
    <td> Temporary files created when your application is running. </td>
  </tr>
  <tr>
    <td> vendor/ </td>
    <td> Folder for Ruby software libraries that are not gems. </td>
  </tr>
</table>
<h3 id="the-app-directory">The App Directory</h3>
<div class="highlight"><pre><span class="gp">$</span> <span class="nb">cd </span>app
<span class="gp">$</span> ls -1p
<span class="go">assets/</span>
<span class="go">controllers/</span>
<span class="go">helpers/</span>
<span class="go">mailers/</span>
<span class="go">models/</span>
<span class="go">views/</span>
<span class="gp">$</span> <span class="nb">cd</span> ..
</pre></div>
</section>
<section class='chapter' id='source-control-with-git'><h2>Source Control with Git</h2>
<p>Reference: <a href="http://en.wikipedia.org/wiki/Git_(software)">Git</a><br />
Reference: <a href="https://github.com/">GitHub</a><br />
Reference: <a href="http://en.wikipedia.org/wiki/Apache_Subversion">svn</a>.</p>
<p>Resource: <a href="http://www.git-tower.com/">Git Tower</a><br />
Resource: <a href="http://list.ly/list/FO-mac-git-clients">Mac Git clients</a></p>
<h3 id="is-git-installed">Is Git Installed?</h3>
<p>As a first step, make sure Git is installed on your computer:</p>
<div class="highlight"><pre><span class="gp">$</span> which git
<span class="go">/usr/local/bin/git</span>
<span class="gp">$</span> git version
<span class="go">git version ...</span>
</pre></div><p>If Git is not found, install Git. GitHub provides instructions to <a href="https://help.github.com/articles/set-up-git">Set Up Git</a>. For Mac OS X, I recommend using <a href="http://mxcl.github.io/homebrew/">Homebrew</a> to install Git. See <a href="http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/">How to Install Xcode, Homebrew, Git…</a> from Moncef Belyamani.</p>
<h3 id="is-git-configured">Is Git Configured?</h3>
<p>Make sure Git knows who you are. Every time you update your Git repository with the <code>git commit</code> command, Git will identify you as the author of the changes.</p>
<div class="highlight"><pre><span class="gp">$</span> git config --get user.name
<span class="gp">$</span> git config --get user.email
</pre></div><p>You should see your name and email address. If not, configure Git:</p>
<div class="highlight"><pre><span class="gp">$</span> git config --global user.name <span class="s2">"Real Name"</span>
<span class="gp">$</span> git config --global user.email <span class="s2">"me@example.com@"</span>
</pre></div><p><em>Note:</em> Use the same email address for Git, your GitHub account, and Heroku to avoid headaches.</p>
<h3 id="create-a-repository">Create a Repository</h3>
<p>The <code>git init</code> command sets up a Git repository (a “repo”) in the project directory. We add the Unix symbol that indicates Git should be initialized in the current directory (git init dot):</p>
<div class="highlight"><pre><span class="gp">$</span> git init .
<span class="go">Initialized empty Git repository in ...</span>
</pre></div><p>It creates a hidden folder named <strong>.git/</strong> in the project directory. You can peek at the contents:</p>
<div class="highlight"><pre><span class="go">ls -1p .git</span>
<span class="go">HEAD</span>
<span class="go">config</span>
<span class="go">description</span>
<span class="go">hooks/</span>
<span class="go">info/</span>
<span class="go">objects/</span>
<span class="go">refs/</span>
</pre></div><h3 id="gitignore">GitIgnore</h3>
<p>Files that should be ignored:</p>
<ul>
  <li>log files created by the web server</li>
  <li>database files</li>
  <li>configuration files that include passwords or <span class="caps">API</span> keys</li>
</ul>
<p>Take a look at the contents of the <strong>.gitignore</strong> file. We use the Unix <code>cat</code> command to display the contents of the file:</p>
<div class="highlight"><pre><span class="gp">$</span> cat .gitignore
<span class="gp">#</span> See http://help.github.com/ignore-files/ <span class="k">for </span>more about ignoring files.
<span class="gp">#</span>
<span class="gp">#</span> If you find yourself ignoring temporary files generated by your text editor
<span class="gp">#</span> or operating system, you probably want to add a global ignore instead:
<span class="gp">#</span>   git config --global core.excludesfile <span class="s1">'~/.gitignore_global'</span>

<span class="gp">#</span> Ignore bundler config.
<span class="go">/.bundle</span>

<span class="gp">#</span> Ignore the default SQLite database.
<span class="go">/db/*.sqlite3</span>
<span class="go">/db/*.sqlite3-journal</span>

<span class="gp">#</span> Ignore all logfiles and tempfiles.
<span class="go">/log/*.log</span>
<span class="go">/tmp</span>
</pre></div><p>For a <strong>.gitignore</strong> file that ignores more, see an <a href="https://github.com/RailsApps/rails-composer/blob/master/files/gitignore.txt">example .gitignore file</a> from the RailsApps project.</p>
<h3 id="git-workflow">Git Workflow</h3>
<h4 id="untracked-files">Untracked Files</h4>
<p>The <code>git status</code> command lists all folders or files that are not checked into the repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span>
<span class="gp">#</span> Initial commit
<span class="gp">#</span>
<span class="gp">#</span> Untracked files:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to include in what will be committed<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span> .gitignore
<span class="gp">#</span> Gemfile
<span class="gp">#</span> Gemfile.lock
<span class="gp">#</span> README.rdoc
<span class="gp">#</span> Rakefile
<span class="gp">#</span> app/
<span class="gp">#</span> bin/
<span class="gp">#</span> config.ru
<span class="gp">#</span> config/
<span class="gp">#</span> db/
<span class="gp">#</span> lib/
<span class="gp">#</span> log/
<span class="gp">#</span> public/
<span class="gp">#</span> vendor/
<span class="go">nothing added to commit but untracked files present (use "git add" to track)</span>
</pre></div><h4 id="staging">Staging</h4>
<p>Mark individual files to be staged:</p>
<div class="highlight"><pre><span class="gp">$</span> git add Gemfile
</pre></div><p>Mark all the files to be staged:</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git status
</pre></div><p>There are three forms of the <code>git add</code> command:</p>
<ul>
  <li><code>git add foo.txt</code> adds a file named <strong>foo.txt</strong></li>
  <li><code>git add .</code> adds all new files and changed files, except deleted files</li>
  <li><code>git add -A</code> adds everything, including deletions</li>
</ul>
<h4 id="committing">Committing</h4>
<p>Commit your project to the repository:</p>
<div class="highlight"><pre><span class="gp">$</span> git commit -m <span class="s2">"Initial commit"</span>
<span class="gp">$</span> git status
</pre></div><p>The -m flag lets you add a message for the commit.</p>
<p>You can use the <code>git log</code> command to see your project history:</p>
<div class="highlight"><pre><span class="gp">$</span> git log
</pre></div><p>If you get “stuck” in <code>git log</code>, type <code>q</code> to return to the command prompt.</p>
<h4 id="pushing-to-github">Pushing to GitHub</h4>
<p>Go to GitHub and <a href="https://github.com/repositories/new">create a new empty repository</a>.</p>
<p>Name the repository “railsapps-learning-rails”.</p>
<div class="highlight"><pre><span class="gp">$</span> git remote add origin git@github.com:YOUR_GITHUB_ACCOUNT/railsapps-learning-rails.git
<span class="go">git push -u origin master</span>
</pre></div><p>Now you can view your project repository on GitHub at:</p>
<ul>
  <li><a href="https://github.com/YOUR_GITHUB_ACCOUNT/railsapps-learning-rails">https://github.com/YOUR_GITHUB_ACCOUNT/railsapps-learning-rails</a></li>
</ul>
<h3 id="the-readme">The <span class="caps">README</span></h3>
<p>In your text editor, open the file <strong><span class="caps">README</span>.rdoc</strong> and replace the contents:</p>
<div class="highlight"><pre>Railsapps Learning Rails
==

Learning Rails with help from the RailsApps project.
</pre></div><p>GitHub lets you add formatting using your choice of markup syntax, depending on the file extension you add to the filename:</p>
<ul>
  <li><span class="caps">README</span>.rdoc uses the <a href="http://rdoc.rubyforge.org/RDoc.html">rdoc</a> syntax</li>
  <li><span class="caps">README</span>.md uses the <a href="https://help.github.com/articles/github-flavored-markdown">GitHub Flavored Markdown</a> syntax</li>
  <li><span class="caps">README</span>.textile uses the <a href="http://redcloth.org/hobix.com/textile/">Textile</a> syntax</li>
</ul>
<p>We’ll use Markdown syntax by adding the <code>==</code> characters after the first line of text to force a headline.</p>
<p>Rename the file to <strong><span class="caps">README</span>.md</strong> and save it.</p>
<div class="highlight"><pre><span class="gp">$</span> mv README.rdoc README.md
</pre></div><p>Use <code>git status</code> to see what has changed:</p>
<div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> On branch master
<span class="gp">#</span> Changes not staged <span class="k">for </span>commit:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">"git add/rm &lt;file&gt;..."</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">"git checkout -- &lt;file&gt;..."</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span> deleted:    README.rdoc
<span class="gp">#</span>
<span class="gp">#</span> Untracked files:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to include in what will be committed<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span> README.md
<span class="go">no changes added to commit (use "git add" and/or "git commit -a")</span>
</pre></div><p>Stage, commit, and push the change to GitHub:</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"update README"</span>
<span class="gp">$</span> git push origin master
</pre></div><p>Take a look at your GitHub repository (refresh the web page).</p>
<p>The <code>git log</code> command will display your project history:</p>
<div class="highlight"><pre><span class="gp">$</span> git log
</pre></div><p>Article: <a href="http://railsapps.github.io/rails-git.html">Git and Rails</a></p>
</section>
<section class='chapter' id='gems'><h2>Gems</h2>
<p>Reference: <a href="https://rubygems.org/">rubygems.org</a><br />
Resource: <a href="http://ruby-toolbox.com/">Ruby Toolbox</a></p>
<h4 id="evaluating-gems">Evaluating Gems</h4>
<p>Ask:</p>
<ul>
  <li>how many issues are open?</li>
  <li>how recent are the commits of patches or updates?</li>
  <li>is there a <span class="caps">CHANGELOG</span> file?</li>
  <li>is the gem well-documented?</li>
  <li>how many “stars” (people watching) or “forks” (people hacking)?</li>
</ul>
<h3 id="rails-gems">Rails Gems</h3>
<p>Reference: <a href="https://rubygems.org/gems/rails">summary page for Rails</a></p>
<ul>
  <li><a href="https://github.com/rails/rails/tree/master/actionmailer">actionmailer</a> – framework for email delivery and testing</li>
  <li><a href="https://github.com/rails/rails/tree/master/actionpack">actionpack</a> – framework for routing and responding to web requests</li>
  <li><a href="https://github.com/rails/rails/tree/master/activerecord">activerecord</a> – framework for connections to databases</li>
  <li><a href="https://github.com/rails/activeresource">activeresource</a> – framework for manipulating data</li>
  <li><a href="https://github.com/rails/rails/tree/master/activesupport">activesupport</a> – utility classes and Ruby library extensions</li>
  <li><a href="http://gembundler.com/">bundler</a> – utility to manage gems</li>
  <li><a href="https://github.com/rails/rails/tree/master/railties">railties</a> – console commands and generators</li>
</ul>
<h3 id="gems-for-a-rails-default-application">Gems for a Rails Default Application</h3>
<ul>
  <li><a href="https://github.com/luislavena/sqlite3-ruby">sqlite3</a> – adapter for the SQLite database</li>
  <li><a href="https://github.com/rails/sass-rails">sass-rails</a> – enables use of the <span class="caps">SCSS</span> syntax for stylesheets</li>
  <li><a href="https://github.com/lautis/uglifier">uglifier</a> – JavaScript compressor</li>
  <li><a href="https://github.com/rails/coffee-rails">coffee-rails</a> – enables use of the CoffeeScript syntax for JavaScript</li>
  <li><a href="https://github.com/rails/jquery-rails">jquery-rails</a> – adds the <a href="http://jquery.com/">jQuery</a> JavaScript library</li>
  <li><a href="https://github.com/rails/turbolinks">turbolinks</a> – faster loading of webpages</li>
  <li><a href="https://github.com/rails/jbuilder">jbuilder</a> – utility for encoding <span class="caps">JSON</span> data</li>
</ul>
<h3 id="where-do-gems-live">Where Do Gems Live?</h3>
<p>Run the <code>gem which</code> command and you’ll see:</p>
<div class="highlight"><pre><span class="gp">$</span> gem which bundler
<span class="go">/Users/me/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.5/lib/bundler.rb</span>
<span class="gp">$</span> gem which rails
<span class="go">/Users/me/.rvm/gems/ruby-2.0.0-p0@railsapps-learning-rails/gems/railties-4.0.0.rc1/lib/rails.rb</span>
</pre></div><p>Gems are files saved to the computer’s disk storage. If you use <span class="caps">RVM</span>, they are saved to a hidden <strong>.rvm</strong> folder in your user directory. A <strong>global</strong> subfolder contains the Bundler gem. A project-specific <strong>railsapps-learning-rails</strong> subfolder contains the Rails gem. If you use Chruby or Rbenv instead of <span class="caps">RVM</span>, your gems will stored in a different location.</p>
<p>If “railsapps-learning-rails” is not in the filepath displayed by <code>gem which rails</code>, you may need to reset your <span class="caps">RVM</span> gemset:</p>
<div class="highlight"><pre><span class="gp">$</span> rvm gemset use railsapps-learning-rails
</pre></div><p>Reference: <a href="http://gembundler.com/">Bundler</a> utility</p>
<h3 id="gemfile">Gemfile</h3>
<p>Concept: <strong>Gemfile.lock</strong> file</p>
<h4 id="gem-versioning">Gem Versioning</h4>
<ul>
  <li><code>gem 'rails', '4.0.0'</code> ia “absolute”, only version 4.0.0 will be used</li>
  <li><code>gem 'rails', '&gt;= 4.0.0'</code> is “optimistic”, any version newer than 4.0.0 will be used</li>
  <li><code>gem 'rails', '~&gt; 4.0.0'</code> is “pessimistic”</li>
</ul>
<p>“Pessimistic” versioning needs some explanation. <code>~&gt; 4.0.0</code> means use<br />
any version greater than 4.0.0 and less than 4.1 (any patch version can be used). <code>~&gt; 4.0</code> means use any version greater than 4.0 and less than 5.0 (any minor version can be used).</p>
<h3 id="gemfile-for-a-rails-default-application">Gemfile for a Rails Default Application</h3>
<p>Open the <strong>Gemfile</strong> with your text editor:</p>
<div class="highlight"><pre><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'3.2.13'</span>

<span class="c1"># Bundle edge Rails instead:</span>
<span class="c1"># gem 'rails', :git =&gt; 'git://github.com/rails/rails.git'</span>

<span class="n">gem</span> <span class="s1">'sqlite3'</span>


<span class="c1"># Gems used only for assets and not required</span>
<span class="c1"># in production environments by default.</span>
<span class="n">group</span> <span class="ss">:assets</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'sass-rails'</span><span class="p">,</span>   <span class="s1">'~&gt; 3.2.3'</span>
  <span class="n">gem</span> <span class="s1">'coffee-rails'</span><span class="p">,</span> <span class="s1">'~&gt; 3.2.1'</span>

  <span class="c1"># See https://github.com/sstephenson/execjs#readme for more supported runtimes</span>
  <span class="c1"># gem 'therubyracer', :platforms =&gt; :ruby</span>

  <span class="n">gem</span> <span class="s1">'uglifier'</span><span class="p">,</span> <span class="s1">'&gt;= 1.0.3'</span>
<span class="k">end</span>

<span class="n">gem</span> <span class="s1">'jquery-rails'</span>

<span class="c1"># To use ActiveModel has_secure_password</span>
<span class="c1"># gem 'bcrypt-ruby', '~&gt; 3.0.0'</span>

<span class="c1"># To use Jbuilder templates for JSON</span>
<span class="c1"># gem 'jbuilder'</span>

<span class="c1"># Use unicorn as the app server</span>
<span class="c1"># gem 'unicorn'</span>

<span class="c1"># Deploy with Capistrano</span>
<span class="c1"># gem 'capistrano'</span>

<span class="c1"># To use debugger</span>
<span class="c1"># gem 'debugger'</span>
</pre></div><p>Add to the Gemfile:</p>
<div class="highlight"><pre><span class="go">ruby '2.0.0'</span>
</pre></div><p><em>Note:</em> If you are developing your application on a computer using the Linux operating system, you may need to uncomment and use the statement <code>gem 'therubyracer', platforms: :ruby</code>. Linux doesn’t have a built-in JavaScript interpreter so you must install Node.js in your environment or else add the therubyracer gem to each project Gemfile.</p>
<p>Edit the the <strong>Gemfile</strong> and save:</p>
<div class="highlight"><pre><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">ruby</span> <span class="s1">'2.0.0'</span>
<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'3.2.13'</span>

<span class="c1"># Rails defaults</span>
<span class="n">gem</span> <span class="s1">'sqlite3'</span>
<span class="n">group</span> <span class="ss">:assets</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'sass-rails'</span><span class="p">,</span>   <span class="s1">'~&gt; 3.2.3'</span>
  <span class="n">gem</span> <span class="s1">'coffee-rails'</span><span class="p">,</span> <span class="s1">'~&gt; 3.2.1'</span>
  <span class="n">gem</span> <span class="s1">'uglifier'</span><span class="p">,</span> <span class="s1">'&gt;= 1.0.3'</span>
<span class="k">end</span>
<span class="n">gem</span> <span class="s1">'jquery-rails'</span>
</pre></div><p>Run <code>bundle install</code>.</p>
<p>Use your text editor to view the contents of <strong>Gemfile.lock</strong> file.</p>
<p>Run <code>gem list</code> to see all the gems that are loaded into the development environment:</p>
<div class="highlight"><pre><span class="gp">$</span> gem list
</pre></div><p>The list of gems loaded in the environment and specified in the <strong>Gemfile.lock</strong> will be the same.</p>
<p><span class="caps">RVM</span> makes a place for the gems to be stored (the <span class="caps">RVM</span> gemset); the <strong>Gemfile</strong> lists the gems you want to use; the <strong>Gemfile.lock</strong> file records dependencies and version numbers; <code>bundle install</code> reads the Gemfile and installs the gems into the <span class="caps">RVM</span> gemset; and <code>gem list</code> shows you the gems that are loaded into memory and available for use.</p>
<h3 id="gems-we-need-today">Gems We Need Today</h3>
<p>Here are the gems we’ll add to the Gemfile:</p>
<ul>
  <li><a href="https://github.com/laserlemon/figaro">figaro</a> – configuration framework</li>
  <li><a href="https://github.com/thoughtbot/high_voltage">high_voltage</a> – for static pages like “about”</li>
  <li><a href="https://github.com/plataformatec/simple_form">simple_form</a> – form helpers</li>
  <li><a href="https://github.com/thomas-mcdonald/bootstrap-sass">bootstrap-sass</a> – Twitter Bootstrap</li>
  <li><a href="https://github.com/amro/gibbon">gibbon</a> – access to the MailChimp <span class="caps">API</span></li>
</ul>
<p>We’ll also add a utility that makes development easier:</p>
<ul>
  <li><a href="https://github.com/charliesome/better_errors">better_errors</a> – helps when things go wrong</li>
</ul>
<h3 id="gems-for-testing">Gems for Testing</h3>
<p>These gems are used for <em>test-driven development</em>:</p>
<div class="highlight"><pre><span class="n">group</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'rspec-rails'</span>
  <span class="n">gem</span> <span class="s1">'factory_girl_rails'</span>
<span class="k">end</span>
<span class="n">group</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'database_cleaner'</span>
  <span class="n">gem</span> <span class="s1">'email_spec'</span>
  <span class="n">gem</span> <span class="s1">'launchy'</span>
  <span class="n">gem</span> <span class="s1">'capybara'</span>
<span class="k">end</span>
</pre></div><h3 id="other-gems">Other Gems</h3>
<p>Gems we’ll use for a more advanced application:</p>
<ul>
  <li><a href="http://github.com/plataformatec/devise">devise</a> – authentication</li>
  <li><a href="https://github.com/ryanb/cancan">cancan</a> – authorization</li>
  <li><a href="https://github.com/EppO/rolify">rolify</a> – roles for authorization</li>
</ul>
<h3 id="adding-gems">Adding Gems</h3>
<p>Open your <strong>Gemfile</strong> and replace the contents with the following:</p>
<p><strong>Gemfile</strong></p>
<div class="highlight"><pre><span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
<span class="n">ruby</span> <span class="s1">'2.0.0'</span>
<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'3.2.13'</span>

<span class="c1"># Rails defaults</span>
<span class="n">gem</span> <span class="s1">'sqlite3'</span>
<span class="n">group</span> <span class="ss">:assets</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'sass-rails'</span><span class="p">,</span>   <span class="s1">'~&gt; 3.2.3'</span>
  <span class="n">gem</span> <span class="s1">'coffee-rails'</span><span class="p">,</span> <span class="s1">'~&gt; 3.2.1'</span>
  <span class="n">gem</span> <span class="s1">'uglifier'</span><span class="p">,</span> <span class="s1">'&gt;= 1.0.3'</span>
<span class="k">end</span>
<span class="n">gem</span> <span class="s1">'jquery-rails'</span>

<span class="c1"># railsapps-learning-rails</span>
<span class="n">gem</span> <span class="s1">'figaro'</span>
<span class="n">gem</span> <span class="s1">'high_voltage'</span>
<span class="n">gem</span> <span class="s1">'bootstrap-sass'</span>
<span class="n">gem</span> <span class="s1">'simple_form'</span>
<span class="n">gem</span> <span class="s2">"gibbon"</span>
<span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'better_errors'</span>
  <span class="n">gem</span> <span class="s1">'quiet_assets'</span>
<span class="k">end</span>
<span class="n">group</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'rspec-rails'</span>
  <span class="n">gem</span> <span class="s1">'factory_girl_rails'</span>
<span class="k">end</span>
<span class="n">group</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'database_cleaner'</span>
  <span class="n">gem</span> <span class="s1">'email_spec'</span>
  <span class="n">gem</span> <span class="s1">'launchy'</span>
  <span class="n">gem</span> <span class="s1">'capybara'</span>
<span class="k">end</span>
</pre></div><h3 id="install-the-gems">Install the Gems</h3>
<p>Now that you’ve edited the Gemfile, you need to install the required gems on your computer:</p>
<div class="highlight"><pre><span class="gp">$</span> bundle install
</pre></div><p>Each time you edit the Gemfile, run <code>bundle install</code> and restart your web server.</p>
<p>You can check that the gems are installed with:</p>
<div class="highlight"><pre><span class="gp">$</span> gem list
</pre></div><h3 id="git">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"add gems"</span>
<span class="gp">$</span> git push origin master
</pre></div><p>We’re ready to configure the application.</p>
</section>
<section class='chapter' id='configuration'><h2>Configuration</h2>
<p>Concept: <a href="http://en.wikipedia.org/wiki/Environment_variable">environment variables</a><br />
Resource: <a href="https://github.com/laserlemon/figaro">figaro gem</a><br />
Article <a href="http://railsapps.github.io/rails-environment-variables.html">Rails Environment Variables</a></p>
<h3 id="configuration-file">Configuration File</h3>
<p>We’ve already installed the figaro gem in the Gemfile and run <code>bundle install</code>.</p>
<p>The figaro gem uses a generator to set up the necessary files. Run:</p>
<div class="highlight"><pre><span class="gp">$</span> rails generate figaro:install
</pre></div><p>This generates a <strong>config/application.yml</strong> file and lists it in your <strong>.gitignore</strong> file.</p>
<p>We’ll set credentials for your MailChimp account in the <strong>config/application.yml</strong> file. The <strong>.gitignore</strong> file prevents the <strong>config/application.yml</strong> file from being saved in the Git repository so your credentials are kept private.</p>
<p>Use your text editor to replace the file <strong>config/application.yml</strong> with this:</p>
<div class="highlight"><pre><span class="c1"># Add account credentials and API keys here.</span>
<span class="c1"># See http://railsapps.github.io/rails-environment-variables.html</span>
<span class="c1"># This file should be listed in .gitignore to keep your settings secret!</span>
<span class="c1"># Each entry sets a local environment variable and overrides ENV variables in the Unix shell.</span>
<span class="l-Scalar-Plain">GMAIL_USERNAME</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Your_Username</span>
<span class="l-Scalar-Plain">GMAIL_PASSWORD</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Your_Password</span>
<span class="l-Scalar-Plain">ADMIN_NAME</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">First User</span>
<span class="l-Scalar-Plain">ADMIN_EMAIL</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">user@example.com</span>
<span class="l-Scalar-Plain">ADMIN_PASSWORD</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">changeme</span>
<span class="l-Scalar-Plain">ROLES</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">admin</span><span class="p-Indicator">,</span> <span class="nv">user</span><span class="p-Indicator">,</span> <span class="nv">VIP</span><span class="p-Indicator">]</span>
</pre></div><h3 id="git-2">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"add configuration file"</span>
<span class="gp">$</span> git push origin master
</pre></div><p>We’re ready to create a home page for the application.</p>
</section>
<section class='chapter' id='static-pages-and-routing'><h2>Static Pages and Routing</h2>
<h3 id="add-a-home-page">Add a Home Page</h3>
<p>Make sure you are in your project directory.</p>
<p>Start the application server:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>. You’ll see the Rails default information page.</p>
<p>Use your text editor to create and save a file <strong>public/index.html</strong>:</p>
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Hello World<span class="nt">&lt;/h1&gt;</span>
</pre></div><p>Refresh the browser window and you’ll see the “Hello World” message.</p>
<p>The Rails application server looks for any pages in the <strong>public</strong> folder by default.</p>
<p>Like other web servers, if no filename is specified, the server will try to respond with a file named <strong>index.html</strong>.</p>
<h3 id="routing-error">Routing Error</h3>
<p>What happens when no file matches the requested web address?</p>
<p>Enter the <span class="caps">URL</span> <a href="http://localhost:3000/about.html">http://localhost:3000/about.html</a> in your browser.</p>
<p>You’ll see an error page that shows a routing error.</p>
<h3 id="add-an-about-page">Add an About Page</h3>
<p>Use your text editor to create and save a file <strong>public/about.html</strong>:</p>
<div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>About<span class="nt">&lt;/h1&gt;</span>
</pre></div><p>Visit the <span class="caps">URL</span> <a href="http://localhost:3000/about.html">http://localhost:3000/about.html</a> in your browser. You’ll see the new “About” page.</p>
<h3 id="introducing-routes">Introducing Routes</h3>
<p>Remove the <strong>public/index.html</strong> file:</p>
<div class="highlight"><pre><span class="gp">$</span> rm public/index.html
</pre></div><p>Now let’s set the “About” page as the home page.</p>
<p>Open the file <strong>config/routes.rb</strong>. Remove all the comments and replace the file with this:</p>
<div class="highlight"><pre><span class="ss">RailsappsLearningRails</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">'/about.html'</span><span class="p">)</span>
<span class="k">end</span>
</pre></div><p>Notice the name of the application <code>RailsappsLearningRails</code> is included in the file. When  you created the application, I suggested you use the name <code>railsapps-learning-rails</code>. If you gave the project a different name, you’ll have to modify the <strong>config/routes.rb</strong> file accordingly.</p>
<p>This snippet of Rails routing code takes any request to the application root (<a href="http://localhost:3000/">http://localhost:3000/</a>) and redirects it to the <strong>about.html</strong> file (which is expected to be found in the <strong>public</strong> folder).</p>
<p>When you change the <strong>config/routes.rb</strong> file, you must restart your application server to see the new behavior. Use Control-C to stop the server and restart it:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Visit the page <a href="http://localhost:3000">http://localhost:3000/</a>. You’ll see the “About” page.</p>
<h3 id="remove-the-about-page">Remove the About Page</h3>
<p>Delete the file <strong>public/about.html</strong>:</p>
<div class="highlight"><pre><span class="gp">$</span> rm public/about.html
</pre></div><h3 id="remove-the-static-home-page">Remove the Static Home Page</h3>
<p>Delete the file <strong>public/index.html</strong>:</p>
<div class="highlight"><pre><span class="gp">$</span> rm public/index.html
</pre></div>
</section>
<section class='chapter' id='dynamic-home-page'><h2>Dynamic Home Page</h2>
<h3 id="user-story">User Story</h3>
<div class="highlight"><pre><span class="nf">*Birthday Countdown*</span>
<span class="nf">As a visitor to the website</span>
<span class="k">I </span><span class="nf">want to see the owner's name</span>
<span class="k">I </span><span class="nf">want to see the owner's birthdate</span>
<span class="k">I </span><span class="nf">want to see how many days until the owner's next birthday</span>
<span class="nf">so I can send birthday greetings</span>
</pre></div><h3 id="model-view-controller">Model View Controller</h3>
<p>Concept:  <a href="http://en.wikipedia.org/wiki/Model%E2%80%93View%E2%80%93Controller">model–view–controller</a> software design pattern</p>
<p>Concept: <em>router</em> <strong>config/routes.rb</strong> file<br />
Concept: <em>controller</em><br />
Concept: <em>model</em><br />
Concept: <em>view</em><br />
Concept: <em>action</em><br />
Concept: <em>method</em><br />
Concept: <em>class</em><br />
Concept: “RESTful” or <em>Representational State Transfer</em></p>
<ul>
  <li><code>index</code></li>
  <li><code>show</code></li>
  <li><code>new</code></li>
  <li><code>edit</code></li>
  <li><code>create</code></li>
  <li><code>update</code></li>
  <li><code>destroy</code></li>
</ul>
<h3 id="naming-the-model-and-controller">Naming the Model and Controller</h3>
<ul>
  <li>HomeController – the file will be <strong>app/controllers/home_controller.rb</strong></li>
  <li>Owner – the file will be <strong>app/models/owner.rb</strong></li>
</ul>
<h3 id="routing">Routing</h3>
<p>Open the file <strong>config/routes.rb</strong>. Replace the contents with this:</p>
<div class="highlight"><pre><span class="ss">RailsappsLearningRails</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">'home#index'</span>
<span class="k">end</span>
</pre></div><p>Reference: <a href="http://guides.rubyonrails.org/routing.html">RailsGuides: Routing from the Outside In</a></p>
<p>Use Control-C to stop the server and restart it:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Visit the page <a href="http://localhost:3000">http://localhost:3000/</a>. You’ll see an error message because we haven’t implemented the controller.</p>
<h3 id="model">Model</h3>
<p>Create a file <strong>app/models/owner.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Owner</span>

  <span class="k">def</span> <span class="nf">name</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="s1">'Foobar Kadigan'</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">birthdate</span>
    <span class="n">birthdate</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">countdown</span>
    <span class="n">today</span> <span class="o">=</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">now</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">birthdate</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">birthdate</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="n">countdown</span> <span class="o">=</span> <span class="p">(</span><span class="n">birthday</span> <span class="o">-</span> <span class="n">today</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>Concept: <em>object</em><br />
Concept: <em>class</em><br />
Concept: <em>class name</em><br />
Concept: <em>methods</em><br />
Concept:  <em>instantiating</em> the class<br />
Concept: <em>calling</em> a method<br />
Concept: <em>return</em> data<br />
Concept: <em>assignment operator</em><br />
Concept: <em>string</em><br />
Concept: <em>integer</em><br />
Concept: <em>float</em><br />
Concept: <em>variable</em><br />
Concept: <span class="caps">API</span> (<em>application programming interface</em>)</p>
<p>Reference: <a href="http://apidock.com/ruby/Date">Ruby <span class="caps">API</span> reference documentation</a></p>
<p>Resource: <a href="http://pine.fm/LearnToProgram/">Learn to Program</a>, book by Chris Pine</p>
<h3 id="view">View</h3>
<p>Create a file <strong>app/views/home/index.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;h3&gt;Home&lt;/h3&gt;</span>
<span class="x">&lt;p&gt;Welcome to the home of </span><span class="cp">&lt;%=</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">.&lt;/p&gt;</span>
<span class="x">&lt;p&gt;I was born on </span><span class="cp">&lt;%=</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">birthdate</span> <span class="cp">%&gt;</span><span class="x">.&lt;/p&gt;</span>
<span class="x">&lt;p&gt;Only </span><span class="cp">&lt;%=</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">countdown</span> <span class="cp">%&gt;</span><span class="x"> days until my birthday!&lt;/p&gt;</span>
</pre></div><p>Resource: <a href="http://railsapps.github.io/rails-haml.html">Haml</a><br />
Resource: <a href="http://slim-lang.com/">Slim</a></p>
<p>Concept: @ character means <em>instance variable</em></p>
<h3 id="controller">Controller</h3>
<p>Create a file <strong>app/controllers/home_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>Hidden behavior inherited from the ApplicationController does all the work of rendering the view. We can make the hidden code explicit if we wish to. It would look something like this:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="n">render</span> <span class="s1">'home/index'</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><h3 id="test-the-application-2">Test the Application</h3>
<p>Enter the command:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>. You’ll see our new home page.</p>
<h3 id="git-3">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"dynamic home page"</span>
<span class="gp">$</span> git push origin master
</pre></div>
</section>
<section class='chapter' id='troubleshooting'><h2>Troubleshooting</h2>
<h3 id="interactive-ruby-shell">Interactive Ruby Shell</h3>
<p><span class="caps">IRB</span> is a Ruby interpreter that runs from the command line.</p>
<p>Let’s try it.</p>
<div class="highlight"><pre><span class="gp">$</span> irb
<span class="go">2.0.0p0 :001 &gt;</span>
</pre></div><p>Try simple arithmetic:</p>
<div class="highlight"><pre><span class="go">2.0.0p0 :001 &gt; n = 2</span>
<span class="go"> =&gt; 2</span>
<span class="go">2.0.0p0 :002 &gt; n + 2</span>
<span class="go"> =&gt; 4</span>
</pre></div><p>Unlike most shell commands, you can’t quit with Control-C. Enter Control-D or type <code>exit</code> to quit <span class="caps">IRB</span>:</p>
<div class="highlight"><pre><span class="gp">$</span> irb
<span class="go">2.0.0p0 :001 &gt; exit</span>
</pre></div><p>Resources about <span class="caps">IRB</span>:</p>
<ul>
  <li><a href="http://mislav.uniqpath.com/poignant-guide/book/expansion-pak-1.html" title="with a Basic Introduction to IRB">Why’s (Poignant) Guide to Ruby</a></li>
  <li><a href="http://ruby-doc.org/docs/ProgrammingRuby/html/irb.html">The Pragmatic Programmer’s Guide</a></li>
</ul>
<h3 id="rails-console">Rails Console</h3>
<div class="highlight"><pre><span class="gp">$</span> rails console
<span class="go">Loading development environment (Rails 4.0.0.rc1)</span>
<span class="go">2.0.0p0 :001 &gt;</span>
</pre></div><p>Use the Rails console to examine our Owner model:</p>
<div class="highlight"><pre><span class="go">2.0.0p0 :001 &gt; myboss = Owner.new</span>
<span class="go"> =&gt; #&lt;Owner:0x007fe885163aa8&gt;</span>
</pre></div><p>Concept: <em>instance</em><br />
Concept: <em>class definition</em></p>
<p>Assign a variable called <code>name</code>:</p>
<div class="highlight"><pre><span class="go">2.0.0p0 :002 &gt; name = myboss.name</span>
<span class="go"> =&gt; "Foobar Kadigan"</span>
</pre></div><p>Perform some <em>string manipulation</em>:</p>
<div class="highlight"><pre><span class="go">2.0.0p0 :003 &gt; name = 'Mr. ' + name</span>
<span class="go"> =&gt; "Mr. Foobar Kadigan"</span>
</pre></div><p>Enter Control-D or type <code>exit</code> to quit the Rails console.</p>
<h3 id="rails-logger">Rails Logger</h3>
<p>The log file is here:</p>
<ul>
  <li><strong>log/development.log</strong></li>
  <li><strong>log/production.log</strong></li>
</ul>
<p>Here’s what you see when you visit the application home page:</p>
<div class="highlight"><pre><span class="go">Started GET "/" for 127.0.0.1 at ...</span>
<span class="go">Processing by HomeController#index as HTML</span>
<span class="go">  Rendered home/index.html.erb within layouts/application (48.8ms)</span>
<span class="go">Completed 200 OK in 233ms (Views: 211.5ms | ActiveRecord: 0.0ms)</span>
</pre></div><p>Modify the file <strong>app/controllers/home_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: entering index method'</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: Owner name is '</span> <span class="o">+</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">name</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>Visit the home page again and you’ll see this in the console output:</p>
<div class="highlight"><pre><span class="go">Started GET "/" for 127.0.0.1 at ...</span>
<span class="go">Processing by HomeController#index as HTML</span>
<span class="go">DEBUG: entering index method</span>
<span class="go">DEBUG: Owner name is Foobar Kadigan</span>
<span class="go">  Rendered home/index.html.erb within layouts/application (0.2ms)</span>
<span class="go">Completed 200 OK in 8ms (Views: 4.6ms | ActiveRecord: 0.0ms)</span>
</pre></div><p>Add logger statements to the <code>Owner</code> model. Modify the file <strong>app/models/owner.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Owner</span>

  <span class="k">def</span> <span class="nf">name</span>
    <span class="nb">name</span> <span class="o">=</span> <span class="s2">"Foobar Kadigan"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">birthdate</span>
    <span class="n">birthdate</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">countdown</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: entering Owner countdown method'</span>
    <span class="n">today</span> <span class="o">=</span> <span class="no">DateTime</span><span class="o">.</span><span class="n">now</span>
    <span class="n">birthday</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">birthdate</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="nb">self</span><span class="o">.</span><span class="n">birthdate</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
    <span class="n">countdown</span> <span class="o">=</span> <span class="p">(</span><span class="n">birthday</span> <span class="o">-</span> <span class="n">today</span><span class="p">)</span><span class="o">.</span><span class="n">to_i</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>We added the <code>Rails.logger.debug</code> statement to the <code>Owner.countdown</code> method.</p>
<p>Visit the home page and here’s what you’ll see in the console output:</p>
<div class="highlight"><pre><span class="go">Started GET "/" for 127.0.0.1 at ...</span>
<span class="go">Processing by HomeController#index as HTML</span>
<span class="go">DEBUG: entering index method</span>
<span class="go">DEBUG: Owner name is Foobar Kadigan</span>
<span class="go">DEBUG: entering Owner countdown method</span>
<span class="go">  Rendered home/index.html.erb within layouts/application (0.3ms)</span>
<span class="go">Completed 200 OK in 7ms (Views: 4.2ms | ActiveRecord: 0.0ms)</span>
</pre></div><p>In a controller, you can use the method <code>logger</code> on its own. In a model, you have to write <code>Rails.logger</code> (both class and method).</p>
<p>You can use any of the methods <code>logger.debug</code>, <code>logger.info</code>, <code>logger.warn</code>, <code>logger.error</code>, or <code>logger.fatal</code> to write log messages. By default, you’ll see any of these messages in the development log. Log messages written with the <code>logger.debug</code> method will not be recorded in a production log file.</p>
<p>If you want your log messages to stand out, you can add formating code for color:</p>
<div class="highlight"><pre><span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s2">"</span><span class="se">\033</span><span class="s2">[1;34;40m[DEBUG]</span><span class="se">\033</span><span class="s2">[0m "</span> <span class="o">+</span> <span class="s1">'will appear in bold blue'</span>
</pre></div><p>Reference: <a href="http://guides.rubyonrails.org/debugging_rails_applications.html">RailsGuide: Debugging Rails Applications</a></p>
<h3 id="the-stack-trace">The Stack Trace</h3>
<p>Concept: <em>stack trace</em></p>
<p>Deliberately create an error condition and see an error page and stack trace.</p>
<p>Modify the file <strong>app/controllers/home_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: entering index method'</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: Owner name is '</span> <span class="o">+</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">name</span>
    <span class="no">DISASTER</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>Visit the home page and you’ll see an error page:</p>
<p>Resource: <a href="https://github.com/charliesome/better_errors">better_errors</a> gem</p>
<div class="highlight"><pre><span class="go">Started GET "/" for 127.0.0.1 at ...</span>
<span class="go">Processing by HomeController#index as HTML</span>
<span class="go">DEBUG: entering index method</span>
<span class="go">DEBUG: Owner name is Foobar Kadigan</span>
<span class="go">Completed 500 Internal Server Error in 10ms</span>

<span class="go">NameError - uninitialized constant HomeController::DISASTER:</span>
<span class="go">  app/controllers/home_controller.rb:7:in `index'</span>
<span class="go">  .</span>
<span class="go">  .</span>
<span class="go">  .</span>
</pre></div><h3 id="raising-an-exception">Raising an Exception</h3>
<p>Concept: <em>raising an exception</em></p>
<p>Modify the file <strong>app/controllers/home_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: entering index method'</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: Owner name is '</span> <span class="o">+</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">name</span>
    <span class="k">raise</span> <span class="s1">'Deliberate Failure'</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>Here’s the console log after you try to visit the home page:</p>
<div class="highlight"><pre><span class="go">Started GET "/" for 127.0.0.1 at ...</span>
<span class="go">Processing by HomeController#index as HTML</span>
<span class="go">DEBUG: entering index method</span>
<span class="go">DEBUG: Owner name is Foobar Kadigan</span>
<span class="go">Completed 500 Internal Server Error in 22ms</span>

<span class="go">RuntimeError - Deliberate Failure:</span>
<span class="go">  app/controllers/home_controller.rb:7:in `index'</span>
<span class="go">  .</span>
<span class="go">  .</span>
<span class="go">  .</span>
</pre></div><p>Remove the deliberate failure. Modify the file <strong>app/controllers/home_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: entering index method'</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: Owner name is '</span> <span class="o">+</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">name</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><h3 id="investigating-the-request-response-cycle">Investigating the Request Response Cycle</h3>
<h4 id="the-browser-side">The Browser Side</h4>
<p>In Chrome on Mac OS X, press Command-Option-I to open the <em>Developer Tools View</em> at the bottom of the browser window. Alternatively, you can find the menu item under View/Developer/Developer Tools.</p>
<p>Select the Network tab in the Developer Tools View.</p>
<p>Begin the request-response cycle by visiting the home page at <a href="http://localhost:3000/">http://localhost:3000/</a>.</p>
<p>Click the “localhost” file icon. Then click the tab “Headers.”</p>
<p>The request is composed of:</p>
<ul>
  <li>request <span class="caps">URL</span> (http://localhost:3000/)</li>
  <li>request method (<span class="caps">GET</span>)</li>
  <li>request headers (including cookies and User Agent identifer)</li>
</ul>
<p>The response is composed of</p>
<ul>
  <li>status code (200 OK or 304 Not Modified)</li>
  <li>response headers (including date/time and server identifier)</li>
  <li><span class="caps">HTML</span></li>
</ul>
<p>You can see the <span class="caps">HTML</span> sent to the browser by clicking the Preview or Response tabs in the diagnostic view.</p>
<h4 id="the-server-side">The Server Side</h4>
<p>Look in the console window:</p>
<div class="highlight"><pre><span class="go">Started GET "/" for 127.0.0.1 at ...</span>
<span class="go">Processing by HomeController#index as HTML</span>
<span class="go">DEBUG: entering index method</span>
<span class="go">DEBUG: Owner name is Foobar Kadigan</span>
<span class="go">DEBUG: entering Owner countdown method</span>
<span class="go">  Rendered home/index.html.erb within layouts/application (0.3ms)</span>
<span class="go">Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)</span>
<span class="go">Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at ...</span>
<span class="go">Started GET "/assets/application.js?body=1" for 127.0.0.1 at ...</span>
<span class="go">Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at ...</span>
<span class="go">Started GET "/assets/application.css?body=1" for 127.0.0.1 at ...</span>
<span class="go">Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at ...</span>
</pre></div><h3 id="git-4">Git</h3>
<p>Use Git to revert your project to the most recent commit.</p>
<div class="highlight"><pre><span class="gp">$</span> git status
<span class="gp">#</span> Changes not staged <span class="k">for </span>commit:
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to update what will be committed<span class="o">)</span>
<span class="gp">#</span>   <span class="o">(</span>use <span class="s2">"git checkout -- &lt;file&gt;..."</span> to discard changes in working directory<span class="o">)</span>
<span class="gp">#</span>
<span class="gp">#</span> modified:   app/controllers/home_controller.rb
<span class="gp">#</span> modified:   app/models/owner.rb
<span class="gp">#</span>
<span class="go">no changes added to commit (use "git add" and/or "git commit -a")</span>
<span class="gp">$</span> git reset --hard HEAD
<span class="gp">$</span> git status
<span class="go">nothing to commit (working directory clean)</span>
</pre></div><p>The Git command <code>git reset --hard HEAD</code> discards any changes you’ve made since the most recent commit.</p>
</section>
<section class='chapter' id='just-enough-ruby'><h2>Just Enough Ruby</h2>
<h3 id="learn-to-program">Learn to Program</h3>
<p>Book (free): <a href="http://pine.fm/LearnToProgram/">Learn To Program</a> by Chris Pine<br />
Book ($18.50 ebook): <a href="http://pragprog.com/book/ltp2/learn-to-program">Learn To Program</a> by Chris Pine</p>
<h3 id="do-you-need-to-know-ruby-to-learn-rails">Do You Need to Know Ruby to Learn Rails?</h3>
<p>Tutorial: <a href="http://rubymonk.com/">RubyMonk</a> – free browser-based interactive tutorial<br />
Tutorial: <a href="http://tryruby.org/levels/1/challenges/0">Try Ruby</a> – free browser-based interactive tutorial<br />
Tutorial: <a href="http://rubykoans.com/">Ruby Koans</a> – free browser-based interactive exercises<br />
Videos: <a href="https://github.com/JoshCheek/ruby-kickstart">Ruby Kickstart</a> – free</p>
<h3 id="ruby-basics">Ruby Basics</h3>
<p>Tutorial: <a href="http://curriculum.railsbridge.org/ruby/ruby">RailsBridge Ruby</a><br />
Reference: <a href="http://pragtob.github.io/rails-beginner-cheatsheet/index.html">Rails Beginner Cheat Sheet</a><br />
Reference: <a href="http://apidock.com/ruby">Ruby <span class="caps">API</span> docs with usage notes</a></p>
</section>
<section class='chapter' id='layout-and-views'><h2>Layout and Views</h2>
<h3 id="application-layout">Application Layout</h3>
<p>The file <strong>app/views/home/index.html.erb</strong> looks like this:</p>
<div class="highlight"><pre><span class="x">&lt;h3&gt;Home&lt;/h3&gt;</span>
<span class="x">&lt;p&gt;Welcome to the home of </span><span class="cp">&lt;%=</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">.&lt;/p&gt;</span>
<span class="x">&lt;p&gt;I was born on </span><span class="cp">&lt;%=</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">birthdate</span> <span class="cp">%&gt;</span><span class="x">.&lt;/p&gt;</span>
<span class="x">&lt;p&gt;Only </span><span class="cp">&lt;%=</span> <span class="vi">@owner</span><span class="o">.</span><span class="n">countdown</span> <span class="cp">%&gt;</span><span class="x"> days until my birthday!&lt;/p&gt;</span>
</pre></div><p>When you used the browser diagnostic view to see the <span class="caps">HTML</span> file received by the server, you saw this:</p>
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>RailsappsLearningRails<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"/assets/application.css?body=1"</span> <span class="na">media=</span><span class="s">"all"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/assets/jquery.js?body=1"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/assets/jquery_ujs.js?body=1"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/assets/turbolinks.js?body=1"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/assets/application.js?body=1"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">content=</span><span class="s">"authenticity_token"</span> <span class="na">name=</span><span class="s">"csrf-param"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">content=</span><span class="s">"NRPrgfuj5GAyylNpNxQaMHDypcOsu6dmh5DT1yET6hQ="</span> <span class="na">name=</span><span class="s">"csrf-token"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;h3&gt;</span>Home<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;p&gt;</span>Welcome to the home of Foobar Kadigan.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>I was born on 1990-09-22.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Only 126 days until my birthday!<span class="nt">&lt;/p&gt;</span>


<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div><p>Where did all the extra <span class="caps">HTML</span> come from?</p>
<p>Open the file <strong>app/views/layouts/application.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">  &lt;title&gt;RailsappsLearningRails&lt;/title&gt;</span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span>    <span class="s2">"application"</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s2">"all"</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>

<span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span><span class="x"></span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div><p>Static pages delivered from the <strong>public</strong> folder do not use the default application layout. But every page generated by the model-view-controller architecture in the <strong>app/</strong> folder incorporates the default application layout, unless you specify otherwise.</p>
<p>Remember the hidden code in the controller that renders a view:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="n">render</span> <span class="s1">'home/index'</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>The <code>render</code> method combines the <strong>app/views/home/index.html.erb</strong> view file with the <strong>app/views/layouts/application.html.erb</strong>: application layout.</p>
<p>You could tell the controller to render the view without any application layout:</p>
<div class="highlight"><pre><span class="n">render</span> <span class="s1">'home/index'</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="kp">false</span>
</pre></div><p>Or you could specify an alternative layout file, for example <strong>app/views/layouts/special.html.erb</strong>:</p>
<div class="highlight"><pre><span class="n">render</span> <span class="s1">'home/index'</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="s1">'special'</span>
</pre></div><p>Reference: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html">RailsGuides: Layouts and Rendering in Rails</a></p>
<h3 id="yield">Yield</h3>
<p>Example:</p>
<div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">  &lt;title&gt;RailsappsLearningRails&lt;/title&gt;</span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="s2">"all"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">  &lt;div class="main"&gt;</span>
<span class="x">    </span><span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">  &lt;div class="sidebar"&gt;</span>
<span class="x">    </span><span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="ss">:sidebar</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div><p>This view file provides both the main content and a sidebar:</p>
<div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">content_for</span> <span class="ss">:sidebar</span> <span class="k">do</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;h3&gt;Contact Info&lt;/h3&gt;</span>
<span class="x">  &lt;p&gt;Email: me@example.com&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;h3&gt;Main&lt;/h3&gt;</span>
<span class="x">&lt;p&gt;Welcome!&lt;/p&gt;</span>
</pre></div><p>Reference <a href="http://guides.rubyonrails.org/layouts_and_rendering.html">RailsGuides: Layouts and Rendering in Rails</a></p>
<h3 id="basic-boilerplate">Basic Boilerplate</h3>
<ul>
  <li>standard <span class="caps">HTML</span> <code>DOCTYPE</code>, <code>&lt;head&gt;</code>, and <code>&lt;body&gt;</code> tags.</li>
  <li><code>yield</code> keyword</li>
  <li><code>stylesheet_link_tag</code> – generates an <span class="caps">HTML</span> <code>&lt;link&gt;</code> tag for <span class="caps">CSS</span></li>
  <li><code>javascript_include_tag</code> – generates an <span class="caps">HTML</span> <code>&lt;script&gt;</code> tag for JavaScript</li>
  <li><code>csrf_meta_tags</code> – generates <code>&lt;meta&gt;</code> tags that prevent <a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery">cross-site request forgery</a></li>
</ul>
<h3 id="adding-boilerplate">Adding Boilerplate</h3>
<p>Resource: <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a><br />
Article <a href="http://railsapps.github.io/rails-html5-boilerplate.html">HTML5 Boilerplate for Rails Developers</a></p>
<h4 id="viewport">Viewport</h4>
<p>Resource: Apple’s developer documentation on <a href="http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html">Configuring the Viewport</a></p>
<p>The <code>viewport</code> metatag looks like this:</p>
<div class="highlight"><pre><span class="x">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span>
</pre></div><h4 id="title-and-description">Title and Description</h4>
<p>Resource: Google’s explanation of how it uses <a href="http://support.google.com/webmasters/bin/answer.py?hl=en&amp;answer=35624">Site Title and Description</a></p>
<p>Adding title and description looks like this:</p>
<div class="highlight"><pre><span class="x">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Learning Rails"</span> <span class="cp">%&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">&lt;meta name="description" content="</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:description</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:description</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Learning Rails"</span> <span class="cp">%&gt;</span><span class="x">"&gt;</span>
</pre></div><p>Concept: Ruby <a href="http://ruby.about.com/od/beginningruby/a/The-Ternary-Or-Conditional-Operator.htm">ternary operator</a></p>
<h3 id="asset-pipeline">Asset Pipeline</h3>
<p>Typical webpage page <span class="caps">HEAD</span> section looks like this:</p>
<div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">  &lt;title&gt;Page that uses multiple JavaScript files&lt;/title&gt;</span>
<span class="x">  &lt;script src="jquery.js" type="text/javascript"&gt;&lt;/script&gt;</span>
<span class="x">  &lt;script src="jquery.plugin.js" type="text/javascript"&gt;&lt;/script&gt;</span>
<span class="x">  &lt;script src="custom.js" type="text/javascript"&gt;&lt;/script&gt;</span>
<span class="x">&lt;/head&gt;</span>
</pre></div><p>Concept: <em>asset pipeline</em></p>
<p>The <strong>app/assets/</strong> directory:</p>
<ul>
  <li><strong>app/assets/javascripts/</strong></li>
  <li><strong>app/assets/stylesheets/</strong></li>
</ul>
<p>Tags that deliver the asset pipeline:</p>
<div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="s2">"all"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div><h3 id="navigation-links">Navigation Links</h3>
<p>Concept: <em>partial</em><br />
Reference: <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials">partial template</a></p>
<p>Example of using the <code>render</code> keyword with a hypothetical file named <strong>app/views/layouts/_footer.html.erb</strong>:</p>
<div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/footer'</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div><p><em>Note:</em> The <code>render</code> method doesn’t want the <code>_</code> underscore character or the <code>.html.erb</code> file extension.</p>
<p>Navigation links that use the <span class="caps">HTML</span> <code>&lt;a&gt;</code> anchor tag:</p>
<div class="highlight"><pre><span class="x">&lt;ul class="nav"&gt;</span>
<span class="x">  &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">  &lt;li&gt;&lt;a href="/about"&gt;About&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">  &lt;li&gt;&lt;a href="/contact"&gt;Contact&lt;/a&gt;&lt;/li&gt;</span>
<span class="x">&lt;/ul&gt;</span>
</pre></div><p>Using the <code>link_to</code> helper, create a file <strong>app/views/layouts/_navigation.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;ul class="nav"&gt;</span>
<span class="x">  &lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Home'</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="x">  &lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'About'</span><span class="p">,</span> <span class="n">page_path</span><span class="p">(</span><span class="s1">'about'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="x">  &lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Contact'</span><span class="p">,</span> <span class="n">page_path</span><span class="p">(</span><span class="s1">'contact'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="x">&lt;/ul&gt;</span>
</pre></div><p>Add the navigation links partial to our application layout with the expression:</p>
<div class="highlight"><pre><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/navigation'</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div><h3 id="flash-messages">Flash Messages</h3>
<p>Concept: <em>flash message</em></p>
<p>Add messages to the home page by modifying the HomeController like this:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">HomeController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@owner</span> <span class="o">=</span> <span class="no">Owner</span><span class="o">.</span><span class="n">new</span>
    <span class="n">flash</span><span class="o">[</span><span class="ss">:notice</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'Welcome!'</span>
    <span class="n">flash</span><span class="o">[</span><span class="ss">:alert</span><span class="o">]</span> <span class="o">=</span> <span class="s1">'My birthday is soon.'</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><p>Concept: Ruby <em>hash</em> also known as an <em>associative array</em> or <em>dictionary</em><br />
Concept: <em>collection</em><br />
Concept: <em>iterator</em> (method named <code>each</code>)<br />
Concept: <em>block</em> (delimited by <code>do</code> and <code>end</code> or <code>{ }</code> braces).</p>
<p>Ruby code to iterate through a <code>flash</code> object:</p>
<div class="highlight"><pre><span class="n">flash</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s1">'&lt;div class="'</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="n">value</span> <span class="o">+</span> <span class="s1">'&lt;/div&gt;'</span>
<span class="k">end</span>
</pre></div><p>The output string will appear as <span class="caps">HTML</span> like this:</p>
<div class="highlight"><pre><span class="x">&lt;div class="notice"&gt;Welcome!&lt;/div&gt;</span>
<span class="x">&lt;div class="alert"&gt;My birthday is soon.&lt;/div&gt;</span>
</pre></div><p>Add a partial for flash messages by creating a file <strong>app/views/layouts/_messages.html.erb</strong> like this:</p>
<div class="highlight"><pre><span class="cp">&lt;%</span> <span class="n">flash</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">msg</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">is_a?</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">    &lt;div class="alert alert-</span><span class="cp">&lt;%=</span> <span class="nb">name</span> <span class="o">==</span> <span class="ss">:notice</span> <span class="p">?</span> <span class="s2">"success"</span> <span class="p">:</span> <span class="s2">"error"</span> <span class="cp">%&gt;</span><span class="x">"&gt;</span>
<span class="x">      &lt;a class="close" data-dismiss="alert"&gt;&amp;#215;&lt;/a&gt;</span>
<span class="x">      </span><span class="cp">&lt;%=</span> <span class="n">content_tag</span> <span class="ss">:div</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="ss">:id</span> <span class="o">=&gt;</span> <span class="s2">"flash_</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">  </span><span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div><h3 id="html5-elements">HTML5 Elements</h3>
<ul>
  <li><code>&lt;header&gt;</code></li>
  <li><code>&lt;footer&gt;</code></li>
  <li><code>&lt;main role="main"&gt;</code></li>
</ul>
<p>Reference: <a href="http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element">W3C specification</a></p>
<h3 id="updated-application-layout">Updated Application Layout</h3>
<p>Modify the file <strong>app/views/layouts/application.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span>
<span class="x">  &lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Learning Rails"</span> <span class="cp">%&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">  &lt;meta name="description" content="</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:description</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:description</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Learning Rails"</span> <span class="cp">%&gt;</span><span class="x">"&gt;</span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">media</span><span class="p">:</span> <span class="s2">"all"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="s2">"data-turbolinks-track"</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">&lt;/head&gt;</span>
<span class="x">&lt;body&gt;</span>
<span class="x">  &lt;div id="container"&gt;</span>
<span class="x">    &lt;header&gt;</span>
<span class="x">      </span><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/navigation'</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">      </span><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/messages'</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">    &lt;/header&gt;</span>
<span class="x">    &lt;main role="main"&gt;</span>
<span class="x">      </span><span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">    &lt;/main&gt;</span>
<span class="x">    &lt;footer&gt;</span>
<span class="x">    &lt;/footer&gt;</span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div><h3 id="test-the-application-3">Test the Application</h3>
<p>The web server may already be running. If not, enter the command:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<h3 id="git-5">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"update application layout"</span>
<span class="gp">$</span> git push origin master
</pre></div>
</section>
<section class='chapter' id='stylesheets-and-twitter-bootstrap'><h2>Stylesheets and Twitter Bootstrap</h2>
<p>Resource: <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a><br />
Resource: <a href="http://foundation.zurb.com/">Zurb Foundation</a></p>
<h3 id="asset-pipeline-for-css">Asset Pipeline for <span class="caps">CSS</span></h3>
<p>Concept: <em>asset pipeline</em></p>
<p>Open the file <strong>app/assets/stylesheets/application.css</strong> in your text editor and you’ll see this:</p>
<div class="highlight"><pre><span class="cm">/*</span>
 <span class="cm">* This is a manifest file that'll be compiled into application.css, which will include all the files</span>
 <span class="cm">* listed below.</span>
 <span class="cm">*</span>
 <span class="cm">* Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,</span>
 <span class="cm">* or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.</span>
 <span class="cm">*</span>
 <span class="cm">* You're free to add application-wide styles to this file and they'll appear at the top of the</span>
 <span class="cm">* compiled file, but it's generally better to create a new file per style scope.</span>
 <span class="cm">*</span>
 <span class="cm">*= require_self</span>
 <span class="cm">*= require_tree .</span>
 <span class="cm">*/</span>
</pre></div><h3 id="css-styling-with-sass"><span class="caps">CSS</span> Styling with <span class="caps">SASS</span></h3>
<p>Rename the <strong>app/assets/stylesheets/application.css</strong> file as <strong>app/assets/stylesheets/application.css.scss</strong>.</p>
<p>Resource: <a href="http://railscasts.com/episodes/268-sass-basics"><span class="caps">SASS</span> Basics</a></p>
<h3 id="css-styling-with-twitter-bootstrap"><span class="caps">CSS</span> Styling with Twitter Bootstrap</h3>
<p>Reference: <a href="http://lesscss.org/"><span class="caps">LESS</span> <span class="caps">CSS</span></a><br />
Reference: <a href="http://sass-lang.com/"><span class="caps">SASS</span></a><br />
Article: <a href="http://rubysource.com/twitter-bootstrap-less-and-sass-understanding-your-options-for-rails-3-1/">Twitter Bootstrap, Less, and Sass</a><br />
Resource: Thomas McDonald’s <a href="https://github.com/thomas-mcdonald/bootstrap-sass">bootstrap-sass</a> gem</p>
<p>In your <strong>Gemfile</strong>, you’ve already added:</p>
<div class="highlight"><pre><span class="n">gem</span> <span class="s1">'bootstrap-sass'</span>
</pre></div><p>Include the Twitter Bootstrap Javascript files by modifying the file <strong>app/assets/javascripts/application.js</strong>:</p>
<div class="highlight"><pre><span class="c1">//= require jquery</span>
<span class="c1">//= require jquery_ujs</span>
<span class="c1">//= require bootstrap</span>
<span class="c1">//= require_tree .</span>
</pre></div><p>Add the file <strong>app/assets/stylesheets/bootstrap_and_overrides.css.scss</strong>:</p>
<div class="highlight"><pre><span class="k">@import</span> <span class="s2">"bootstrap"</span><span class="p">;</span>
<span class="nt">body</span> <span class="p">{</span> <span class="na">padding-top</span><span class="o">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span> <span class="p">}</span>
<span class="k">@import</span> <span class="s2">"bootstrap-responsive"</span><span class="p">;</span>
</pre></div><p>The <span class="caps">CSS</span> rule <code>body { padding-top: 60px; }</code> applies an additional <span class="caps">CSS</span> rule to accommodate the “Bootstrap navigation bar” heading created by the <code>navbar-fixed-top class</code> in the <code>header</code> tag in the layout below.</p>
<p>Add this to your <strong>app/assets/stylesheets/application.css.scss</strong> file for a gray background:</p>
<div class="highlight"><pre><span class="nc">.content</span> <span class="p">{</span>
  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#eee</span><span class="p">;</span>
  <span class="na">padding</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">-20</span><span class="kt">px</span><span class="p">;</span> <span class="cm">/* negative indent the amount of the padding to maintain the grid system */</span>
  <span class="na">-webkit-border-radius</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">6</span><span class="kt">px</span> <span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">-moz-border-radius</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">6</span><span class="kt">px</span> <span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">border-radius</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">6</span><span class="kt">px</span> <span class="mi">6</span><span class="kt">px</span><span class="p">;</span>
  <span class="na">-webkit-box-shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,.</span><span class="mi">15</span><span class="p">);</span>
  <span class="na">-moz-box-shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,.</span><span class="mi">15</span><span class="p">);</span>
  <span class="na">box-shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">,.</span><span class="mi">15</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><h3 id="default-application-layout-with-twitter-bootstrap">Default Application Layout with Twitter Bootstrap</h3>
<p>Replace the contents of the file <strong>app/views/layouts/application.html.erb</strong> with this:</p>
<div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">  &lt;head&gt;</span>
<span class="x">    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span>
<span class="x">    &lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Learning Rails"</span> <span class="cp">%&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">    &lt;meta name="description" content="</span><span class="cp">&lt;%=</span> <span class="n">content_for?</span><span class="p">(</span><span class="ss">:description</span><span class="p">)</span> <span class="p">?</span> <span class="k">yield</span><span class="p">(</span><span class="ss">:description</span><span class="p">)</span> <span class="p">:</span> <span class="s2">"Learning Rails"</span> <span class="cp">%&gt;</span><span class="x">"&gt;</span>
<span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"application"</span><span class="p">,</span> <span class="ss">:media</span> <span class="o">=&gt;</span> <span class="s2">"all"</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span> <span class="s2">"application"</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">    </span><span class="cp">&lt;%=</span> <span class="n">csrf_meta_tags</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  &lt;/head&gt;</span>
<span class="x">  &lt;body&gt;</span>
<span class="x">    &lt;header class="navbar navbar-fixed-top"&gt;</span>
<span class="x">      &lt;nav class="navbar-inner"&gt;</span>
<span class="x">        &lt;div class="container"&gt;</span>
<span class="x">          </span><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/navigation'</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">      &lt;/nav&gt;</span>
<span class="x">    &lt;/header&gt;</span>
<span class="x">    &lt;main role="main"&gt;</span>
<span class="x">      &lt;div class="container"&gt;</span>
<span class="x">        &lt;div class="content"&gt;</span>
<span class="x">           &lt;div class="row"&gt;</span>
<span class="x">            &lt;div class="span12"&gt;</span>
<span class="x">              </span><span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s1">'layouts/messages'</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">              </span><span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">            &lt;/div&gt;</span>
<span class="x">          &lt;/div&gt;</span>
<span class="x">          &lt;footer&gt;</span>
<span class="x">          &lt;/footer&gt;</span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">      &lt;/div&gt; &lt;!--! end of .container --&gt;</span>
<span class="x">    &lt;/main&gt; &lt;!--! end of #main --&gt;</span>
<span class="x">  &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div><p>Article: <a href="http://railsapps.github.io/rails-default-application-layout.html">Rails Default Application Layout</a></p>
<h3 id="set-up-simpleform-with-twitter-bootstrap">Set up SimpleForm with Twitter Bootstrap</h3>
<p>Resource: <a href="https://github.com/plataformatec/simple_form">SimpleForm gem</a><br />
Resource: <a href="http://simple-form-bootstrap.plataformatec.com.br/">SimpleForm and Twitter Bootstrap demo app</a></p>
<p>You should have the following gem in your <strong>Gemfile</strong>:</p>
<div class="highlight"><pre><span class="n">gem</span> <span class="s1">'simple_form'</span>
</pre></div><p>If you haven’t already, run:</p>
<div class="highlight"><pre><span class="gp">$</span> bundle install
</pre></div><p>Run the generator to install SimpleForm with a Twitter Bootstrap option:</p>
<div class="highlight"><pre><span class="gp">$</span> rails generate simple_form:install --bootstrap
</pre></div><p>which installs several configuration files:</p>
<div class="highlight"><pre><span class="go">config/initializers/simple_form.rb</span>
<span class="go">config/initializers/simple_form_bootstrap.rb</span>
<span class="go">config/locales/simple_form.en.yml</span>
<span class="go">lib/templates/erb/scaffold/_form.html.erb</span>
</pre></div><h3 id="test-the-application-4">Test the Application</h3>
<p>Enter the command:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<h3 id="git-6">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"stylesheets"</span>
<span class="gp">$</span> git push origin master
</pre></div>
</section>
<section class='chapter' id='adding-pages'><h2>Adding Pages</h2>
<h3 id="highvoltage-gem">HighVoltage Gem</h3>
<p>Resource: <a href="https://github.com/thoughtbot/high_voltage">high_voltage gem</a></p>
<p>Create a folder <strong>app/views/pages</strong>:</p>
<div class="highlight"><pre><span class="gp">$</span> mkdir app/views/pages
</pre></div><h3 id="about-page">“About” Page</h3>
<p>Create a file <strong>app/views/pages/about.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;h3&gt;About Foobar Kadigan&lt;/h3&gt;</span>
<span class="x">&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;</span>
</pre></div><h3 id="contact-page">Contact Page</h3>
<p>Create a file <strong>app/views/pages/contact.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;h3&gt;Contact&lt;/h3&gt;</span>
</pre></div><h3 id="test-the-application-5">Test the Application</h3>
<p>The web server may already be running. If not, enter the command:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<p>Links to the pages “About” and “Contact” should work.</p>
<h3 id="git-7">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"about and contact"</span>
<span class="gp">$</span> git push origin master
</pre></div>
</section>
<section class='chapter' id='contact-form'><h2>Contact Form</h2>
<h3 id="adding-a-form-to-the-contact-page">Adding a Form to the Contact Page</h3>
<p>Resource: <a href="https://github.com/plataformatec/simple_form">SimpleForm gem</a><br />
Resource: <a href="http://simple-form-bootstrap.plataformatec.com.br/">SimpleForm and Twitter Bootstrap demo app</a></p>
<p>Replace the contents of the file <strong>app/views/pages/contact.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;h3&gt;Contact&lt;/h3&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">simple_form_for</span> <span class="ss">:contact</span><span class="p">,</span> <span class="ss">url</span><span class="p">:</span> <span class="n">contact_path</span><span class="p">,</span> <span class="ss">:html</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'form-vertical'</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">error_notification</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">input</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:autofocus</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">input</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">:required</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">input</span> <span class="ss">:content</span><span class="p">,</span> <span class="ss">:input_html</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">"span6"</span> <span class="p">}</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">button</span> <span class="ss">:submit</span><span class="p">,</span> <span class="s1">'Submit'</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'btn-primary'</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div><h3 id="controller-2">Controller</h3>
<p>Create a file <strong>app/controllers/contacts_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ContactsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">process_form</span>
    <span class="no">Rails</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span> <span class="s1">'DEBUG: params are'</span> <span class="o">+</span> <span class="n">params</span><span class="o">.</span><span class="n">inspect</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s2">"Received request from </span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:contact</span><span class="o">][</span><span class="ss">:name</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span>
    <span class="n">redirect_to</span> <span class="n">root_path</span><span class="p">,</span> <span class="ss">:notice</span> <span class="o">=&gt;</span> <span class="n">message</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div><h3 id="routing-2">Routing</h3>
<p>Open the file <strong>config/routes.rb</strong>. Replace the contents with this:</p>
<div class="highlight"><pre><span class="ss">RailsappsLearningRails</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">match</span> <span class="s1">'contact'</span> <span class="o">=&gt;</span> <span class="s1">'contacts#process_form'</span>
  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">'home#index'</span>
<span class="k">end</span>
</pre></div><p>Reference: <a href="http://guides.rubyonrails.org/routing.html">RailsGuides: Routing from the Outside In</a></p>
<h3 id="test-the-application-6">Test the Application</h3>
<p>The web server may already be running. If not, enter the command:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<p>Click the “Contact” link and fill out the form.</p>
<p>Notice the flash message that appears on the home page.</p>
<p>Notice what appears in the console log:</p>
<div class="highlight"><pre><span class="go">Started POST "/contact" for 127.0.0.1 at 2013-05-25 05:24:59 -0700</span>
<span class="go">Processing by ContactsController#process_form as HTML</span>
<span class="go">  Parameters: {"utf8"=&gt;"✓", "authenticity_token"=&gt;"rQJfWNurHbEI3RBj/myfUkcbkeX5cgQ06y4y91Jqthw=", "contact"=&gt;{"name"=&gt;"Daniel Kehoe", "email"=&gt;"daniel@danielkehoe.com", "content"=&gt;"Looking forward to your birthday!"}, "commit"=&gt;"Submit"}</span>
<span class="go">DEBUG: params are{"utf8"=&gt;"✓", "authenticity_token"=&gt;"rQJfWNurHbEI3RBj/myfUkcbkeX5cgQ06y4y91Jqthw=", "contact"=&gt;{"name"=&gt;"Daniel Kehoe", "email"=&gt;"daniel@danielkehoe.com", "content"=&gt;"Looking forward to your birthday!"}, "commit"=&gt;"Submit", "action"=&gt;"process_form", "controller"=&gt;"contacts"}</span>
<span class="go">Redirected to http://lvh.me:3000/</span>
<span class="go">Completed 302 Found in 0ms (ActiveRecord: 0.0ms)</span>
</pre></div><h3 id="model-2">Model</h3>
<p>Reference: <a href="http://railscasts.com/episodes/219-active-model">RailsCasts: Active Model</a></p>
<p>Create a file <strong>app/models/contact.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Contact</span>
  <span class="kp">include</span> <span class="ss">ActiveModel</span><span class="p">:</span><span class="ss">:Validations</span>
  <span class="kp">include</span> <span class="ss">ActiveModel</span><span class="p">:</span><span class="ss">:Conversion</span>
  <span class="kp">extend</span> <span class="ss">ActiveModel</span><span class="p">:</span><span class="ss">:Naming</span>

  <span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">:content</span>

  <span class="n">validates_presence_of</span> <span class="ss">:name</span>
  <span class="n">validates_format_of</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="sr">/^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i</span>
  <span class="n">validates_length_of</span> <span class="ss">:content</span><span class="p">,</span> <span class="ss">:maximum</span> <span class="o">=&gt;</span> <span class="mi">500</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">attributes</span> <span class="o">=</span> <span class="p">{})</span>
    <span class="n">attributes</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
      <span class="nb">send</span><span class="p">(</span><span class="s2">"</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">="</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">persisted?</span>
    <span class="kp">false</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3 id="controller-3">Controller</h3>
<p>Replace the contents of the file <strong>app/controllers/contacts_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ContactsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@contact</span> <span class="o">=</span> <span class="no">Contact</span><span class="o">.</span><span class="n">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@contact</span> <span class="o">=</span> <span class="no">Contact</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:contact</span><span class="o">]</span><span class="p">)</span>
    <span class="k">if</span> <span class="vi">@contact</span><span class="o">.</span><span class="n">valid?</span>
      <span class="c1"># TODO send message here</span>
      <span class="n">flash</span><span class="o">[</span><span class="ss">:notice</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"Message sent from </span><span class="si">#{</span><span class="vi">@contact</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">."</span>
      <span class="n">redirect_to</span> <span class="n">root_path</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:action</span> <span class="o">=&gt;</span> <span class="s1">'new'</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3 id="routing-3">Routing</h3>
<p>Open the file <strong>config/routes.rb</strong>. Replace the contents with this:</p>
<div class="highlight"><pre><span class="ss">RailsappsLearningRails</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">draw</span> <span class="k">do</span>
  <span class="n">resources</span> <span class="ss">:contacts</span>
  <span class="n">root</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s1">'home#index'</span>
<span class="k">end</span>
</pre></div><h3 id="navigation-links-2">Navigation Links</h3>
<p>Change the file <strong>app/views/layouts/_navigation.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;ul class="nav"&gt;</span>
<span class="x">  &lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Home'</span><span class="p">,</span> <span class="n">root_path</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="x">  &lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'About'</span><span class="p">,</span> <span class="n">page_path</span><span class="p">(</span><span class="s1">'about'</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="x">  &lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Contact'</span><span class="p">,</span> <span class="n">new_contact_path</span> <span class="cp">%&gt;</span><span class="x">&lt;/li&gt;</span>
<span class="x">&lt;/ul&gt;</span>
</pre></div><h3 id="update-the-contact-form">Update the Contact Form</h3>
<p>Resource: <a href="https://github.com/plataformatec/simple_form">SimpleForm gem</a><br />
Resource: <a href="http://simple-form-bootstrap.plataformatec.com.br/">SimpleForm and Twitter Bootstrap demo app</a></p>
<p>Remove the file <strong>app/views/pages/contact.html.erb</strong>.</p>
<p>Create a file <strong>app/views/contacts/new.html.erb</strong>:</p>
<div class="highlight"><pre><span class="x">&lt;h3&gt;Contact&lt;/h3&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">simple_form_for</span> <span class="vi">@contact</span><span class="p">,</span> <span class="ss">:html</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'form-vertical'</span> <span class="p">}</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">error_notification</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">input</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:autofocus</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">input</span> <span class="ss">:email</span><span class="p">,</span> <span class="ss">:required</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">input</span> <span class="ss">:content</span><span class="p">,</span> <span class="ss">:input_html</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s2">"span6"</span> <span class="p">}</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="x">  </span><span class="cp">&lt;%=</span> <span class="n">f</span><span class="o">.</span><span class="n">button</span> <span class="ss">:submit</span><span class="p">,</span> <span class="s1">'Submit'</span><span class="p">,</span> <span class="ss">:class</span> <span class="o">=&gt;</span> <span class="s1">'btn-primary'</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div><h3 id="test-the-application-7">Test the Application</h3>
<p>Stop the web server with Control-c and restart:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<p>Click the “Contact” link and fill out the form.</p>
<p>Notice the flash message that appears on the home page.</p>
<p>Try submitting the form with a blank name or invalid email address.</p>
<p>You’ll see a form validation error message.</p>
<h3 id="git-8">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"contact form"</span>
<span class="gp">$</span> git push origin master
</pre></div>
</section>
<section class='chapter' id='sending-mail'><h2>Sending Mail</h2>
<p>Article: <a href="http://guides.rubyonrails.org/action_mailer_basics.html">RailsGuides: Action Mailer Basics</a></p>
<h3 id="create-email-message">Create Email Message</h3>
<p>Generate a mailer with accompanying views:</p>
<div class="highlight"><pre><span class="gp">$</span> rails generate mailer UserMailer
</pre></div><p>Add a <code>contact_email</code> method to the mailer by editing the file <strong>app/mailers/user_mailer.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">UserMailer</span> <span class="o">&lt;</span> <span class="ss">ActionMailer</span><span class="p">:</span><span class="ss">:Base</span>
  <span class="n">default</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"notifications@example.com"</span>

  <span class="k">def</span> <span class="nf">contact_email</span><span class="p">(</span><span class="n">contact</span><span class="p">)</span>
    <span class="vi">@contact</span> <span class="o">=</span> <span class="n">contact</span>
    <span class="n">mail</span><span class="p">(</span><span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s2">"notifications@example.com"</span><span class="p">,</span> <span class="ss">:subject</span> <span class="o">=&gt;</span> <span class="s2">"Website Contact"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><p>Replace the “notifications@example.com” string with your email address. You’ll need to <strong>replace it in <span class="caps">TWO</span> places</strong>.</p>
<p>Create a mailer view by creating a file <strong>app/views/user_mailer/contact_email.html.erb</strong>. This will be the template used for the email, formatted in <span class="caps">HTML</span>:</p>
<div class="highlight"><pre><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">  &lt;head&gt;</span>
<span class="x">    &lt;meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /&gt;</span>
<span class="x">  &lt;/head&gt;</span>
<span class="x">  &lt;body&gt;</span>
<span class="x">    &lt;h1&gt;Website Contact&lt;/h1&gt;</span>
<span class="x">    &lt;p&gt;</span>
<span class="x">      This visitor requested contact:</span>
<span class="x">    &lt;/p&gt;</span>
<span class="x">    &lt;p&gt;</span>
<span class="x">      </span><span class="cp">&lt;%=</span> <span class="vi">@contact</span><span class="o">.</span><span class="n">name</span> <span class="cp">%&gt;</span><span class="x">&lt;br/&gt;</span>
<span class="x">      </span><span class="cp">&lt;%=</span> <span class="vi">@contact</span><span class="o">.</span><span class="n">email</span> <span class="cp">%&gt;</span><span class="x">&lt;br/&gt;</span>
<span class="x">    &lt;/p&gt;</span>
<span class="x">    &lt;p&gt;</span>
<span class="x">      The visitor said:</span>
<span class="x">    &lt;/p&gt;</span>
<span class="x">    &lt;p&gt;</span>
<span class="x">      "</span><span class="cp">&lt;%=</span> <span class="vi">@contact</span><span class="o">.</span><span class="n">content</span> <span class="cp">%&gt;</span><span class="x">"</span>
<span class="x">    &lt;/p&gt;</span>
<span class="x">  &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div><h3 id="modify-controller">Modify Controller</h3>
<p>Replace the contents of the file <strong>app/controllers/contacts_controller.rb</strong>:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">ContactsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@contact</span> <span class="o">=</span> <span class="no">Contact</span><span class="o">.</span><span class="n">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@contact</span> <span class="o">=</span> <span class="no">Contact</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:contact</span><span class="o">]</span><span class="p">)</span>
    <span class="k">if</span> <span class="vi">@contact</span><span class="o">.</span><span class="n">valid?</span>
      <span class="c1"># send message here</span>
      <span class="no">UserMailer</span><span class="o">.</span><span class="n">contact_email</span><span class="p">(</span><span class="vi">@contact</span><span class="p">)</span><span class="o">.</span><span class="n">deliver</span>
      <span class="n">flash</span><span class="o">[</span><span class="ss">:notice</span><span class="o">]</span> <span class="o">=</span> <span class="s2">"Message sent from </span><span class="si">#{</span><span class="vi">@contact</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">."</span>
      <span class="n">redirect_to</span> <span class="n">root_path</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:action</span> <span class="o">=&gt;</span> <span class="s1">'new'</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div><h3 id="update-configuration-file">Update Configuration File</h3>
<p>You’ll need a Gmail account if you want to try sending real email.</p>
<p>If you don’t have a Gmail account, you can sign up for an account with <a href="http://mandrill.com/">Mandrill</a> instead and follow instructions in the article <a href="http://railsapps.github.io/rails-send-email.html">Send Email with Rails</a>.</p>
<p>You’ll need to add your Gmail username and password to the file <strong>config/application.yml</strong>. Change this to your real username and password:</p>
<div class="highlight"><pre><span class="l-Scalar-Plain">GMAIL_USERNAME</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Your_Username</span>
<span class="l-Scalar-Plain">GMAIL_PASSWORD</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Your_Password</span>
</pre></div><h3 id="configure-email">Configure Email</h3>
<p>Article: <a href="http://railsapps.github.io/rails-send-email.html">Send Email with Rails</a></p>
<p>Email messages are visible in the console and the log file when you test the application.</p>
<p>If you want to send real messages when you test the application in development mode, modify the file <strong>config/environments/development.rb</strong>.</p>
<p>Add this:</p>
<div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">address</span><span class="p">:</span> <span class="s2">"smtp.gmail.com"</span><span class="p">,</span>
  <span class="ss">port</span><span class="p">:</span> <span class="mi">587</span><span class="p">,</span>
  <span class="ss">domain</span><span class="p">:</span> <span class="s2">"example.com"</span><span class="p">,</span>
  <span class="ss">authentication</span><span class="p">:</span> <span class="s2">"plain"</span><span class="p">,</span>
  <span class="n">enable_starttls_auto</span><span class="p">:</span> <span class="kp">true</span><span class="p">,</span>
  <span class="n">user_name</span><span class="p">:</span> <span class="no">ENV</span><span class="o">[</span><span class="s2">"GMAIL_USERNAME"</span><span class="o">]</span><span class="p">,</span>
  <span class="ss">password</span><span class="p">:</span> <span class="no">ENV</span><span class="o">[</span><span class="s2">"GMAIL_PASSWORD"</span><span class="o">]</span>
<span class="p">}</span>
</pre></div><p>Change the statement:</p>
<div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">perform_deliveries</span> <span class="o">=</span> <span class="kp">false</span>
</pre></div><p>to:</p>
<div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">perform_deliveries</span> <span class="o">=</span> <span class="kp">true</span>
</pre></div><p>and when you try the application, a real message will be sent.</p>
<h3 id="test-the-application-8">Test the Application</h3>
<p>If your web server is not running, restart it:</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>Open a web browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<p>Click the “Contact” link try submitting the form.</p>
<p>The email message should be visible in the console.</p>
<p>You’ll should get a real email message in your inbox if you set up your <strong>config/environments/development.rb</strong> file to perform deliveries.</p>
<h3 id="git-9">Git</h3>
<p>Let’s commit our changes to the Git repository.</p>
<div class="highlight"><pre><span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"sending mail"</span>
<span class="gp">$</span> git push origin master
</pre></div>
</section>
<section class='chapter' id='deploy'><h2>Deploy</h2>
<h3 id="cleanup">Cleanup</h3>
<p>Article: <a href="http://railsapps.github.io/rails-cleanup.html">Cleaning up unneeded files in Rails and banning spiders</a>.</p>
<h3 id="test-the-app">Test the App</h3>
<p>You can check that your app runs properly by entering the command</p>
<div class="highlight"><pre><span class="gp">$</span> rails server
</pre></div><p>To see your application in action, open a browser window and navigate to <a href="http://localhost:3000">http://localhost:3000/</a>.</p>
<p>To sign in as the first user (the administrator), (unless you’ve changed it) use</p>
<ul>
  <li>email: user@example.com</li>
  <li>password: changeme</li>
</ul>
<p>You’ll see a navigation link for Admin. Clicking the link will display a page with a list of users at<br />
<a href="http://localhost:3000/users">http://localhost:3000/users</a>.</p>
<p>As an administrator, you can change any user’s role or delete a user.</p>
<p>To sign in as the second user, (unless you’ve changed it) use</p>
<ul>
  <li>email: user2@example.com</li>
  <li>password: changeme</li>
</ul>
<p>The second user will not see the Admin navigation link and will not be able to access the page at<br />
<a href="http://localhost:3000/users">http://localhost:3000/users</a>.</p>
<p>Stop the server with Control-C.</p>
<h3 id="deploy-to-heroku">Deploy to Heroku</h3>
<p>Article: <a href="http://railsapps.github.io/rails-heroku-tutorial.html">Tutorial for Rails on Heroku</a></p>
<p>Add this configuration parameter to the <strong>config/application.rb</strong> file:</p>
<div class="highlight"><pre><span class="c1"># Heroku requires this to be false</span>
<span class="n">config</span><span class="o">.</span><span class="n">assets</span><span class="o">.</span><span class="n">initialize_on_precompile</span><span class="o">=</span><span class="kp">false</span>
</pre></div><p>Then precompile assets, commit to git, and push to Heroku:</p>
<div class="highlight"><pre><span class="gp">$</span> rake assets:precompile
<span class="gp">$</span> git add -A
<span class="gp">$</span> git commit -m <span class="s2">"assets compiled for Heroku"</span>
<span class="gp">$</span> git push heroku master
</pre></div><p>You’ll need to set the configuration values from the <strong>config/application.yml</strong> file as Heroku environment variables.</p>
<p>With the figaro gem, just run:</p>
<div class="highlight"><pre><span class="gp">$</span> rake figaro:heroku
</pre></div><p>Complete Heroku deployment with:</p>
<div class="highlight"><pre><span class="gp">$</span> heroku run rake db:migrate
<span class="gp">$</span> heroku run rake db:seed
</pre></div>
</section>
<section class='chapter' id='whats-next'><h2>What’s Next?</h2>
<h3 id="references-2">References</h3>
<p>Reference: <a href="http://railsapps.github.io/ruby-and-rails.html">RailsApps top resources for Ruby and Rails</a></p>
<h4 id="recommended-tutorials">Recommended Tutorials</h4>
<p>Resource: <a href="https://tutorials.railsapps.org/rails-tutorial">Rails Tutorials</a> recommendations to suit your skill level and learning style</p>
<h4 id="books">Books</h4>
<table>
  <tr>
    <td> <a href="http://pragprog.com/book/rails4/agile-web-development-with-rails" title="4th edition">Agile Web Development with Rails</a> </td>
    <td> ebook covers Rails 4.0 </td>
    <td> Sam Ruby, Dave Thomas, and David Heinemeier Hansson </td>
  </tr>
  <tr>
    <td> <a href="http://www.manning.com/bigg2/">Rails 4 In Action</a> </td>
    <td> ebook covers Rails 4.0 </td>
    <td> Yehuda Katz and Ryan Bigg </td>
  </tr>
  <tr>
    <td> <a href="http://ruby.railstutorial.org/ruby-on-rails-tutorial-book">Ruby on Rails Tutorial</a> </td>
    <td> free ebook, covers Rails 3.2 </td>
    <td> Michael Hartl </td>
  </tr>
</table>
<h3 id="getting-help-3">Getting Help</h3>
<p>Reference: Google<br />
Reference: <a href="http://stackoverflow.com/questions/tagged/ruby-on-rails-3">Stack Overflow</a><br />
Reference: <a href="http://www.railshotline.com/">Rails Hotline</a></p>
<h3 id="meetups-hack-nights-and-workshops-2">Meetups, Hack Nights, and Workshops</h3>
<p>Reference: <a href="http://www.meetup.com/sfruby/">San Francisco Ruby Meetup Group</a><br />
For women: <a href="http://workshops.railsbridge.org/">RailsBridge</a><br />
For women: <a href="http://railsgirls.com/">Rails Girls</a></p>
<h3 id="pair-programming-2">Pair Programming</h3>
<p>Resource: <a href="http://www.pairprogramwith.me/">pairprogramwith.me</a><br />
Resource: <a href="http://rubypair.com/">rubypair.com</a><br />
Resource: <a href="http://www.letspair.net/">letspair.net</a>.</p>
<h3 id="thank-you">Thank You</h3>
<p>Thank you for attending the class!</p>
</section>
<div class='comments'>
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'railsapps'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">Comments disabled.</a>
</div><!-- class="comments" -->
    </div>
  </div>
</div>
<footer class="footer">
  <div class="footer-constrain">
    <p>Code licensed under the <a href="http://www.opensource.org/licenses/mit-license" target="_blank">MIT License</a>.<br />Use of the tutorials is restricted to registered users of the RailsApps Tutorials website.</p>
    <ul class="footer-links">
      <li><a href="https://tutorials.railsapps.org/pages/support#Privacy">Privacy</a></li>
      <li class="muted">&middot;</li>
      <li><a href="https://tutorials.railsapps.org/pages/support#Legal">Legal</a></li>
      <li class="muted">&middot;</li>
      <li><a href="https://tutorials.railsapps.org/pages/support">Support</a></li>
    </ul>
  </div>
</footer>
</body>
</html>
